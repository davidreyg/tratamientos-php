import{W as $,Y as E,ba as I,r as c,bb as P,H as A,o as l,ak as q,aj as z,a5 as a,w as e,am as g,a2 as s,e as d,ac as y,aY as k,f as b,au as u,ae as p,a6 as C,bc as O,al as D,ag as F}from"./index.c8292963.js";import{_ as M,a as U}from"./RegistrarResultadosForm.103f6d2d.js";import{u as Y,_ as j}from"./OrdenTable.ecfcfbdf.js";import{O as G}from"./OrdenApi.ff53f922.js";import{u as h}from"./laboratorio.store.dc70561f.js";import"./BaseCheckBox.91937ad9.js";import"./BaseTable.aa5f51c7.js";function H(){return $(f=>G.registrar(f))}const J={class:"row q-col-gutter-md"},W={class:"col-12"},oe=E({__name:"RegistrarResultadosPage",setup(f){const{$reset:N,fetchOrdenById:R}=h(),{ordenSeleccionada:o,isOrdenLoading:Q}=I(h()),w=c({search:"estado:0",searchJoin:"and",limit:0}),i=c(),{data:m,refetch:x}=Y(w),r=c("list"),B=async t=>{i.value=t,await R(t),o.value&&(r.value="edit-examens")},{mutateAsync:V,isLoading:L}=H(),S=async t=>{i.value=t,await V(t,{onSuccess:()=>{F.success("La orden se REGISTRO correctamente."),x.value(),r.value="list"}})},_=()=>{o.value=void 0};return P(()=>{N()}),A(()=>o.value,t=>{t||(r.value="list")}),(t,v)=>(l(),q("div",J,[z("div",W,[a(D,{modelValue:r.value,"onUpdate:modelValue":v[0]||(v[0]=n=>r.value=n),animated:""},{default:e(()=>[a(g,{name:"list"},{default:e(()=>[s(m)?(l(),d(j,{key:0,ordens:s(m).data},{"custom-actions":e(({props:n})=>[a(y,{color:"primary",icon:"fas fa-file-signature",round:"",flat:"",size:"sm",loading:s(Q)&&i.value===Number(n.key),onClick:T=>B(Number(n.key))},{default:e(()=>[a(k,null,{default:e(()=>[b("Editar resultados.")]),_:1})]),_:2},1032,["loading","onClick"]),n.row.estado===0?(l(),d(y,{key:0,color:"info",icon:"fas fa-check-double",round:"",flat:"",size:"sm",loading:s(L)&&i.value===Number(n.key),onClick:T=>S(Number(n.key))},{default:e(()=>[a(k,null,{default:e(()=>[b("Confirmar registro.")]),_:1})]),_:2},1032,["loading","onClick"])):u("",!0)]),_:1},8,["ordens"])):u("",!0)]),_:1}),a(g,{name:"edit-examens"},{default:e(()=>[s(o)?(l(),d(O,{key:0,icon:"fas fa-file-signature",label:"Datos de la orden."},{default:e(()=>[a(p,{class:"my-card"},{default:e(()=>[a(C,null,{default:e(()=>[a(M,{orden:s(o)},null,8,["orden"])]),_:1})]),_:1})]),_:1})):u("",!0),s(o)?(l(),d(O,{key:1,icon:"fas fa-vials",label:"Registrar resultados.",caption:"Editar / Crear","default-opened":""},{default:e(()=>[a(p,{class:"my-card"},{default:e(()=>[a(C,null,{default:e(()=>[a(U,{orden:s(o),onCancel:_,onSubmit:_},null,8,["orden"])]),_:1})]),_:1})]),_:1})):u("",!0)]),_:1})]),_:1},8,["modelValue"])])]))}});export{oe as default};

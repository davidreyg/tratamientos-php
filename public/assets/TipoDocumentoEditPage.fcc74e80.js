import{a$ as T,ah as $,d as g,h as l,j as p,v as h,x as f,u as s,aX as k,z as S,aq as E,B as _,ar as N}from"./index.c50cd903.js";import{_ as w}from"./SkeletonForm.3ff022b0.js";import{T as D}from"./TipoDocumentoApi.057d7bfa.js";import{u as B,a as y,_ as C}from"./BaseForm.a2fb25a2.js";import{c as q,a as v,e as x}from"./index.esm.1f0c9726.js";import{Q as F}from"./QueryTypes.707bd378.js";class O{static async run(t){try{return(await D.fetchOne(t)).data().data}catch(o){throw o}}}class Q{static async run(t,o){try{await D.update(t,o)}catch(a){throw a}}}function L(e,t){const o=async()=>await O.run(e),{data:a,isLoading:c,isSuccess:r,isError:i,isFetching:u,refetch:n}=T([F.TIPO_DOCUMENTO_ALL,e],o,{enabled:t});return{data:a,isLoading:c,isSuccess:r,isError:i,isFetching:u,refetch:n}}function U(){return $(({data:e,id:t})=>Q.run(e,t))}const I=g({__name:"TipoDocumentoEditForm",props:{tipoDocumento:{type:Object,required:!0}},emits:["submit","cancel"],setup(e,{emit:t}){const o=e,a=t,c=q().shape({nombre:v().trim().min(2).required().label("Nombre"),digitos:x().typeError("Debe ingresar un numero").required().integer().positive().label("Digitos")}),{handleSubmit:r,setErrors:i}=B({validationSchema:c,initialValues:o.tipoDocumento}),{isLoading:u,mutate:n}=U(),b=r(async d=>{n({data:d,id:o.tipoDocumento.id},{onSuccess:()=>{a("submit")},onError:m=>{i(m.data.errors)}})});return(d,m)=>(l(),p(C,{class:"col-sm-6 col-xs-12 col-md-5",loading:s(u),onSubmit:s(b),onCancel:m[0]||(m[0]=V=>d.$emit("cancel"))},{default:h(()=>[f(y,{name:"nombre",label:"Nombre",class:"col-12"}),f(y,{name:"digitos",label:"N\xB0 Digitos",class:"col-12"})]),_:1},8,["loading","onSubmit"]))}}),M={class:"row"},G=g({__name:"TipoDocumentoEditPage",props:{id:{type:Number,required:!0}},setup(e){const t=e,o=k(),{data:a,isSuccess:c,isFetching:r}=L(t.id,!0),i=()=>{N.success("Registro actualizado correctamente"),o.back()};return(u,n)=>(l(),S("div",M,[s(r)?(l(),p(E,{key:0,class:"col-sm-6 col-xs-12 col-md-5 q-pa-lg"},{default:h(()=>[f(w,{class:"col-12",inputs:2})]),_:1})):_("",!0),s(c)&&!s(r)&&s(a)?(l(),p(I,{key:1,"tipo-documento":s(a),gol:s(a),onSubmit:i,onCancel:n[0]||(n[0]=b=>u.$router.back())},null,8,["tipo-documento","gol"])):_("",!0)]))}});export{G as default};

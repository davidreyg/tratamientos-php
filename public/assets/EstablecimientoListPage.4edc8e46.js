import{U as $,X as p,o as l,aj as h,v as b,d as c,w as n,a4 as a,Q as y,a7 as d,e as E,a6 as v,aC as B,aD as x,aE as _,aF as g,r as O,a1 as C,af as D}from"./index.0b61b42a.js";import{E as S}from"./EstablecimientoApi.f30e0dee.js";import{_ as k}from"./BaseTable.15a0ffee.js";import{u as F}from"./establecimientoFetchAllQuery.87bb6dd9.js";function N(){return $(e=>S.destroy(e))}const Q=p({__name:"EstablecimientoTableActions",props:{id:{type:String,required:!0}},emits:["destroy","edit"],setup(e){return(o,t)=>(l(),h(x,null,[b((l(),c(v,{clickable:"",onClick:t[0]||(t[0]=r=>o.$emit("edit",e.id))},{default:n(()=>[a(d,{avatar:""},{default:n(()=>[a(y,{name:"fas fa-pen-to-square",color:"warning"})]),_:1}),a(d,null,{default:n(()=>[E("Editar")]),_:1})]),_:1})),[[_]]),a(B),b((l(),c(v,{clickable:"",onClick:t[1]||(t[1]=r=>o.$emit("destroy",e.id))},{default:n(()=>[a(d,{avatar:""},{default:n(()=>[a(y,{name:"fas fa-trash-can",color:"negative"})]),_:1}),a(d,null,{default:n(()=>[E("Eliminar")]),_:1})]),_:1})),[[_]])],64))}}),q=p({__name:"EstablecimientoTable",props:{loading:{type:Boolean,required:!1,default:!1},data:{type:Array,required:!0},serverPagination:{type:Object,default:void 0}},emits:["destroyOne","edit"],setup(e,{emit:o}){const t=o,r=[{name:"nombre",align:"left",label:"Nombre",field:"nombre",sortable:!0},{name:"codigo",align:"center",label:"C\xF3digo",field:"codigo",sortable:!0},{name:"ris",align:"center",label:"RIS",field:"ris",sortable:!0},{name:"actions",align:"right",label:"",field:"actions"}],{mutateAsync:u}=N(),m=i=>{g.fire({title:"\xBFEst\xE1 seguro de eliminar este registro?",text:"No podra deshacer los cambios!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Si",cancelButtonText:"No",showLoaderOnConfirm:!0,preConfirm:async()=>{await u(i,{onSuccess:async()=>{t("destroyOne",i)},onError:()=>{g.hideLoading()}})},allowOutsideClick:()=>!g.isLoading()})};return(i,f)=>(l(),c(k,{columns:r,data:e.data,loading:e.loading,"row-key":"id","server-pagination":e.serverPagination,"show-grid-toggle":!1},{actions:n(({key:s})=>[a(Q,{id:s,onEdit:w=>i.$emit("edit",s),onDestroy:w=>m(s)},null,8,["id","onEdit","onDestroy"])]),_:1},8,["data","loading","server-pagination"]))}}),P=p({__name:"EstablecimientoListPage",setup(e){const o=O({limit:0}),{data:t,isFetching:r,refetch:u}=F(o),m=()=>{D.success("Registro eliminado correctamente."),u.value()};return(i,f)=>(l(),c(q,{data:C(t)||[],loading:C(r),onEdit:f[0]||(f[0]=s=>i.$router.push({name:"establecimientos.edit",params:{id:s}})),onDestroyOne:m},null,8,["data","loading"]))}});export{P as default};

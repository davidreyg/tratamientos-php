var We=Object.defineProperty;var Xe=(o,e,t)=>e in o?We(o,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[e]=t;var O=(o,e,t)=>(Xe(o,typeof e!="symbol"?e+"":e,t),t);import{au as ue,s as ve,e as E,c as B,aE as P,a_ as De,d as G,w as ze,h as s,j as p,v as n,y as _,x as a,u as i,aC as C,z as w,C as j,ay as le,az as L,K as z,A as N,F as U,b2 as pe,aB as Le,B as V,a$ as te,Q as Ze,S as ea,U as aa,G as oa,bx as ta,ax as Y,a4 as ye,aA as je,aT as $e,aD as fe,L as na,aw as la,by as Me}from"./index.10e45f7e.js";import{b as ia,u as be,a as g,_ as de,Q as sa}from"./BaseInput.d65c6510.js";import{D as se,u as Be}from"./useLuxonFormat.a1b67595.js";import{Q as qe}from"./QueryTypes.707bd378.js";import{E as ra}from"./EmpleadoApi.a03f10cd.js";import{_ as we,a as ne,u as ca,Q as ua,b as da}from"./personaReniecQuery.ee01c828.js";import{c as _e,a as h,d as ke,e as oe}from"./index.esm.1f0c9726.js";import{Q as Ve}from"./QSelect.3fbb843b.js";import{Q as re,a as He,c as Ue,b as ma}from"./QTable.f31ffa45.js";import{D as Ne}from"./DiagnosticoApi.578200e8.js";import{u as Re}from"./tipoDocumentoFetchAllQuery.7f57ab58.js";import{u as fa}from"./index.b2cc158d.js";import"./index.2837e86a.js";import"./rtl.b51694b1.js";import"./TipoDocumentoApi.b454450d.js";class pa{static async run(e){try{await Ne.create(e)}catch(t){throw t}}}class va{static async run(e){try{return(await Ne.fetchDiagnosticoById(e)).data().data}catch(t){throw t}}}class ba{static async run(e){try{return(await Ne.fetchDiagnosticosByPaciente(e)).data().data}catch(t){throw t}}}class _a{static async run(e,t){try{await Ne.finalizarDiagnostico(e,t)}catch(l){throw l}}}function ya(){return ue(o=>pa.run(o))}function ga(){return ue(({motivo:o,id:e})=>_a.run(o,e))}const R=class{static async create(e){await R._api.post(R._endpoint,e)}static async update(e,t){await R._api.patch(`${R._endpoint}/${t}`,e)}static async fetchControlesByDiagnostico(e){return await R._api.get(R._endpoint,{search:`diagnostico_id:${e}`})}static async fetchControlById(e){return await R._api.get(`${R._endpoint}/${e}`)}static async delete(e){return await R._api.delete(`${R._endpoint}/${e}`)}};let Z=R;O(Z,"_api",ve),O(Z,"_endpoint","controls");class ha{static async run(e){try{await Z.create(e)}catch(t){throw t}}}class Ca{static async run(e){try{await Z.delete(e)}catch(t){throw t}}}class xa{static async run(e){try{return(await Z.fetchControlById(e)).data().data}catch(t){throw t}}}class wa{static async run(e){try{return(await Z.fetchControlesByDiagnostico(e)).data().data}catch(t){throw t}}}class ka{static async run(e,t){try{await Z.update(e,t)}catch(l){throw l}}}function Fa(){return ue(o=>ha.run(o))}function Da(){return ue(o=>Ca.run(o))}function qa(){return ue(({data:o,id:e})=>ka.run(o,e))}function $a(){const o=E(),e=E(!1),t=async r=>{e.value=!0,o.value=void 0;try{o.value=await xa.run(r),e.value=!1}catch{e.value=!1}},l=B(()=>!o.value);return{control:o,isControlEmpty:l,isLoading:e,fetch:t}}function Ea(){const o=E([]),e=E(!1),t=async r=>{e.value=!0,o.value=[];try{o.value=await wa.run(r),e.value=!1}catch{e.value=!1}},l=B(()=>!!(!o.value||o.value&&o.value.length===0));return{controles:o,isControlesEmpty:l,isLoading:e,fetch:t}}function Sa(){const o=E(),e=E(!1),{fetch:t,controles:l,isControlesEmpty:r}=Ea(),m=async c=>{e.value=!0,o.value=void 0;try{o.value=await va.run(c),l.value=[],o.value&&await t(o.value.id),e.value=!1}catch{e.value=!1}},u=B(()=>!o.value);return{diagnostico:o,controles:l,isDiagnosticoEmpty:u,isControlesEmpty:r,isLoading:e,fetch:m,fetchControles:t}}function Aa(){const o=E(),e=E(!1),t=async r=>{e.value=!0,o.value=void 0;try{o.value=await ba.run(r),e.value=!1}catch{e.value=!1}},l=B(()=>!!(!o.value||o.value&&o.value.length===0));return{diagnosticos:o,isDiagnosticosEmpty:l,isLoading:e,fetch:t}}function Fe(o){const e=E([]),{remove:t,push:l,fields:r}=ia(o);return{arr_seleccionados:e,push:c=>{if(e.value.some(y=>y.value===c.value)){P.warn("Ya has agregado este item");return}e.value.push(c),l(c.value)},remove:c=>{e.value.splice(c,1),t(c)},fields:r}}class Ta{static async run(){try{return(await ra.fetchAll({search:"cargo_id:1",limit:0})).data().data}catch(e){throw P.error("Hubo un error al traer los medicos..."),e}}}function Pe(){const o=async()=>await Ta.run(),{data:e,isLoading:t,isSuccess:l,isError:r,isFetching:m,refetch:u}=De([qe.EMPLEADOS_ALL,"medicos"],o);return{data:e,isLoading:t,isSuccess:l,isError:r,isFetching:m,refetch:u}}const Ee=class{static fetchAll(){return Ee._api.get(`${Ee._endpoint}`)}};let ge=Ee;O(ge,"_api",ve),O(ge,"_endpoint","/complicaciones");class La{static async run(){try{return(await ge.fetchAll()).data().data}catch(e){throw P.error("Hubo un error al traer las complicaciones..."),e}}}function Ye(){const o=async()=>await La.run(),{data:e,isLoading:t,refetch:l,error:r}=De([qe.COMPLICACION_ALL],o);return{data:e,isLoading:t,error:r,refetch:l}}const Se=class{static fetchAll(){return Se._api.get(`${Se._endpoint}`)}};let he=Se;O(he,"_api",ve),O(he,"_endpoint","/medicamentos");class Ba{static async run(){try{return(await he.fetchAll()).data().data}catch(e){throw P.error("Hubo un error al traer los medicamentos..."),e}}}function Ge(){const o=async()=>await Ba.run(),{data:e,isLoading:t,refetch:l,error:r}=De([qe.MEDICAMENTO_ALL],o);return{data:e,isLoading:t,error:r,refetch:l}}const Na={class:"col-xs-12 col-sm-4"},Ia={class:"col-xs-12 col-sm-4"},Ma={class:"col-xs-12 col-sm-6"},Qa={class:"col-xs-12 col-sm-6"},Va=G({__name:"ControlCreateForm",props:{diagnosticoId:{type:String,required:!0},ultimoControl:{type:Object,required:!1,default:void 0}},emits:["submit","cancel"],setup(o,{emit:e}){const t=o,l=e,{data:r}=Pe(),{data:m}=Ge(),{data:u}=Ye(),c=B(()=>r.value?r.value.map(f=>({label:f.nombres+" "+f.apellido_paterno+" "+f.apellido_materno,value:f.id})):[]),v=B(()=>m.value?m.value.map(f=>({label:f.nombre,value:f.id})):[]),y=B(()=>u.value?u.value.map(f=>({label:f.nombre,value:f.id})):[]),S=_e().shape({diagnostico_id:h().trim().required().label("Diagnostico"),empleado_id:h().trim().required().label("Medico"),fecha_inicio:h().required().label("Fecha Inicio"),observaciones:h().nullable().label("Observaciones"),fecha_fin:h().required().label("Fecha Fin"),medicamentos:ke().required().label("Medicamentos"),complicaciones:ke().optional().label("Complicaciones")}),{handleSubmit:F,setFieldValue:I}=be({validationSchema:S,initialValues:{fecha_inicio:se.now().toISODate(),fecha_fin:se.now().toISODate()}});I("diagnostico_id",t.diagnosticoId);const D=E(),A=E(),{arr_seleccionados:W,remove:q,push:M}=Fe("medicamentos"),{arr_seleccionados:X,remove:K,push:d}=Fe("complicaciones"),{mutate:x,isLoading:Q}=Fa(),ie=F(async f=>{x(f,{onSuccess:()=>{P.success("Control registrado correctamente"),l("submit",t.diagnosticoId)},onError:b=>{console.log(b)}})});return ze(()=>t.ultimoControl,f=>{f&&(I("empleado_id",f.medico.data.id),f.medicamentos.data.forEach(b=>{M({label:b.nombre,value:b.id})}))},{immediate:!0}),(f,b)=>(s(),p(de,{loading:i(Q),onSubmit:i(ie),onCancel:b[4]||(b[4]=k=>f.$emit("cancel"))},{default:n(()=>[_("div",Na,[a(we,{required:"",name:"fecha_inicio",label:"Fecha Inicio","min-date":i(se).now()},null,8,["min-date"])]),_("div",Ia,[a(we,{required:"",name:"fecha_fin",label:"Fecha Fin","min-date":i(se).now()},null,8,["min-date"])]),a(ne,{options:c.value,name:"empleado_id",label:"Medico",class:"col-xs-12 col-sm-4"},null,8,["options"]),_("div",Ma,[a(ne,{modelValue:D.value,"onUpdate:modelValue":b[1]||(b[1]=k=>D.value=k),options:v.value,outlined:!1,"emit-value":!1,borderless:"",dense:"",name:"medicamento",label:"Tratamiento"},{after:n(()=>[a(C,{disable:!D.value,round:"",dense:"",icon:"add",color:"positive",onClick:b[0]||(b[0]=()=>{i(M)(D.value),D.value=void 0})},null,8,["disable"])]),_:1},8,["modelValue","options"]),a(pe,null,{default:n(()=>[(s(!0),w(U,null,j(i(W),(k,H)=>(s(),p(le,{key:k.value},{default:n(()=>[a(L,null,{default:n(()=>[z(N(k.label),1)]),_:2},1024),a(L,{side:""},{default:n(()=>[a(C,{round:"",flat:"",size:"lg",padding:"0",color:"negative",icon:"cancel",onClick:J=>i(q)(H)},null,8,["onClick"])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_("div",Qa,[a(ne,{modelValue:A.value,"onUpdate:modelValue":b[3]||(b[3]=k=>A.value=k),options:y.value,borderless:"",outlined:!1,"emit-value":!1,dense:"",name:"complicacion",label:"Complicaciones"},{after:n(()=>[a(C,{disable:!A.value,round:"",dense:"",icon:"add",color:"positive",onClick:b[2]||(b[2]=()=>{i(d)(A.value),A.value=void 0})},null,8,["disable"])]),_:1},8,["modelValue","options"]),a(pe,null,{default:n(()=>[(s(!0),w(U,null,j(i(X),(k,H)=>(s(),p(le,{key:k.value},{default:n(()=>[a(L,null,{default:n(()=>[z(N(k.label),1)]),_:2},1024),a(L,{side:""},{default:n(()=>[a(C,{round:"",flat:"",size:"lg",padding:"0",color:"negative",icon:"cancel",onClick:J=>i(K)(H)},null,8,["onClick"])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),a(g,{type:"textarea",name:"observaciones",label:"Observaciones",class:"col-xs-12 col-sm-6"})]),_:1},8,["loading","onSubmit"]))}}),za={class:"col-xs-12 col-sm-4"},Pa={class:"col-xs-12 col-sm-4"},Oa={class:"col-xs-12 col-sm-6"},ja={class:"col-xs-12 col-sm-6"},Ua=G({__name:"ControlEditForm",props:{diagnosticoId:{type:String,required:!0},control:{type:Object,required:!0}},emits:["submit","cancel"],setup(o,{emit:e}){const t=o,l=e,{data:r}=Pe(),{data:m}=Ge(),{data:u}=Ye(),c=B(()=>r.value?r.value.map(f=>({label:f.nombres+" "+f.apellido_paterno+" "+f.apellido_materno,value:f.id})):[]),v=B(()=>m.value?m.value.map(f=>({label:f.nombre,value:f.id})):[]),y=B(()=>u.value?u.value.map(f=>({label:f.nombre,value:f.id})):[]),S=_e().shape({diagnostico_id:h().trim().required().label("Diagnostico"),empleado_id:h().trim().required().label("Medico"),fecha_inicio:h().required().label("Fecha Inicio"),observaciones:h().nullable().label("Observaciones"),fecha_fin:h().required().label("Fecha Fin"),medicamentos:ke().required().label("Medicamentos"),complicaciones:ke().optional().label("Complicaciones")}),{handleSubmit:F,setFieldValue:I}=be({validationSchema:S});I("diagnostico_id",t.diagnosticoId);const D=E(),A=E(),{arr_seleccionados:W,remove:q,push:M}=Fe("medicamentos"),{arr_seleccionados:X,remove:K,push:d}=Fe("complicaciones"),{mutate:x,isLoading:Q}=qa(),ie=F(async f=>{x({data:f,id:t.control.id},{onSuccess:()=>{P.success("Control actualizado correctamente"),l("submit",t.diagnosticoId)},onError:b=>{console.log(b)}})});return ze(()=>t.control,f=>{I("fecha_inicio",f.fecha_inicio),I("fecha_fin",f.fecha_fin),I("empleado_id",f.medico.data.id),I("observaciones",f.observaciones),f.medicamentos.data.forEach(b=>{M({label:b.nombre,value:b.id})}),f.complicaciones.data.forEach(b=>{d({label:b.nombre,value:b.id})})},{immediate:!0}),(f,b)=>(s(),p(de,{loading:i(Q),onSubmit:i(ie),onCancel:b[4]||(b[4]=k=>f.$emit("cancel"))},{default:n(()=>[_("div",za,[a(we,{required:"",name:"fecha_inicio",label:"Fecha Inicio","min-date":i(se).now()},null,8,["min-date"])]),_("div",Pa,[a(we,{required:"",name:"fecha_fin",label:"Fecha Fin","min-date":i(se).now()},null,8,["min-date"])]),a(ne,{options:c.value,name:"empleado_id",label:"Medico",class:"col-xs-12 col-sm-4"},null,8,["options"]),_("div",Oa,[a(Ve,{modelValue:D.value,"onUpdate:modelValue":b[1]||(b[1]=k=>D.value=k),options:v.value,borderless:"",dense:"",name:"medicamento",label:"Tratamiento"},{after:n(()=>[a(C,{disable:!D.value,round:"",dense:"",icon:"add",color:"positive",onClick:b[0]||(b[0]=()=>{i(M)(D.value),D.value=void 0})},null,8,["disable"])]),_:1},8,["modelValue","options"]),a(pe,null,{default:n(()=>[(s(!0),w(U,null,j(i(W),(k,H)=>(s(),p(le,{key:k.value},{default:n(()=>[a(L,null,{default:n(()=>[z(N(k.label),1)]),_:2},1024),a(L,{side:""},{default:n(()=>[a(C,{round:"",flat:"",size:"lg",padding:"0",color:"negative",icon:"cancel",onClick:J=>i(q)(H)},null,8,["onClick"])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_("div",ja,[a(Ve,{modelValue:A.value,"onUpdate:modelValue":b[3]||(b[3]=k=>A.value=k),options:y.value,borderless:"",dense:"",name:"complicacion",label:"Complicaciones"},{after:n(()=>[a(C,{disable:!A.value,round:"",dense:"",icon:"add",color:"positive",onClick:b[2]||(b[2]=()=>{i(d)(A.value),A.value=void 0})},null,8,["disable"])]),_:1},8,["modelValue","options"]),a(pe,null,{default:n(()=>[(s(!0),w(U,null,j(i(X),(k,H)=>(s(),p(le,{key:k.value},{default:n(()=>[a(L,null,{default:n(()=>[z(N(k.label),1)]),_:2},1024),a(L,{side:""},{default:n(()=>[a(C,{round:"",flat:"",size:"lg",padding:"0",color:"negative",icon:"cancel",onClick:J=>i(K)(H)},null,8,["onClick"])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),a(g,{type:"textarea",name:"observaciones",label:"Observaciones",class:"col-xs-12 col-sm-6"})]),_:1},8,["loading","onSubmit"]))}}),Ha={class:"col-xs-12 col-sm-6"},Ra=_("div",null,"Tratamiento",-1),Ya={class:"col-xs-12 col-sm-6"},Ga=_("div",null,"Complicaciones",-1),Ka=G({__name:"ControlViewForm",props:{control:{type:Object,required:!0}},emits:["cancel"],setup(o){const{formatDate:e}=Be();return(t,l)=>(s(),p(de,null,{actions:n(()=>[a(Le,{class:"col-12 justify-end q-pa-none q-pt-md"},{default:n(()=>[a(C,{label:"Volver",color:"primary","no-caps":"",outline:"",onClick:l[0]||(l[0]=r=>t.$emit("cancel"))})]),_:1})]),default:n(()=>[a(g,{value:i(e)(o.control.fecha_inicio),borderless:!0,readonly:!0,outlined:!1,required:"",name:"fecha_inicio",label:"Fecha Inicio",class:"col-xs-12 col-sm-4"},null,8,["value"]),a(g,{value:i(e)(o.control.fecha_fin),borderless:!0,readonly:!0,outlined:!1,required:"",name:"fecha_fin",class:"col-xs-12 col-sm-4",label:"Fecha Fin"},null,8,["value"]),a(g,{borderless:!0,readonly:!0,outlined:!1,name:"medico_id",label:"Medico",class:"col-xs-12 col-sm-4"}),_("div",Ha,[Ra,_("ul",null,[(s(!0),w(U,null,j(o.control.medicamentos.data,r=>(s(),w("li",{key:r.id},N(r.nombre),1))),128))])]),_("div",Ya,[Ga,_("ul",null,[(s(!0),w(U,null,j(o.control.complicaciones.data,r=>(s(),w("li",{key:r.id},N(r.nombre),1))),128))])]),a(g,{borderless:!0,readonly:!0,outlined:!1,type:"textarea",name:"observaciones",label:"Observaciones",class:"col-xs-12 col-sm-6"})]),_:1}))}}),Ja=G({__name:"ControlesTable",props:{controles:{type:Array,required:!0},isDiagnosticoActive:{type:Boolean,required:!0}},emits:["addControl","editControl","deleteControl","viewControl"],setup(o,{emit:e}){const t=e,{formatDate:l}=Be(),r=[{name:"control",align:"left",label:"N\xB0",field:"control"},{name:"medicamentos",align:"left",label:"Tratamiento",field:c=>c.medicamentos.data.map(v=>v.nombre)},{name:"complicaciones",align:"left",label:"Complicacion",field:c=>c.complicaciones.data.map(v=>v.nombre)},{name:"observaciones",align:"center",label:"Observaciones",field:"observaciones"},{name:"fecha_inicio",align:"center",label:"Fecha Inicio",field:"fecha_inicio",format:c=>l(c)},{name:"fecha_fin",align:"center",label:"Fecha Fin",field:"fecha_fin",format:c=>l(c)},{name:"medico",align:"center",label:"Medico",field:c=>c.medico.data.nombres+" "+c.medico.data.apellido_paterno+" "+c.medico.data.apellido_materno},{name:"actions",align:"right",label:"Acciones",field:"actions"}],{mutateAsync:m}=Da(),u=c=>{te.fire({title:"\xBFEst\xE1 seguro de eliminar este registro?",text:"No podra deshacer los cambios!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Si",cancelButtonText:"No",showLoaderOnConfirm:!0,preConfirm:async()=>{await m(c,{onSuccess:async()=>{P.success("Control eliminado correctamente."),t("deleteControl",c)},onError:()=>{te.hideLoading()}})},allowOutsideClick:()=>!te.isLoading()})};return(c,v)=>(s(),p(i(He),{columns:r,rows:o.controles,"row-key":"id",loading:!1},{"top-right":n(()=>[o.isDiagnosticoActive?(s(),p(C,{key:0,flat:"",color:"primary",icon:"fas fa-folder-plus",label:"Nuevo","no-caps":"",onClick:v[0]||(v[0]=y=>c.$emit("addControl"))})):V("",!0)]),"body-cell-control":n(y=>[a(re,{class:"text-left text-bold"},{default:n(()=>[z(" Control "+N(y.rowIndex+1),1)]),_:2},1024)]),"body-cell-actions":n(y=>[a(re,{class:"text-right",style:{"min-width":"150px"}},{default:n(()=>[a(Le,{align:"right",class:"q-pa-none q-ma-none"},{default:n(()=>[a(C,{color:"primary",icon:"fas fa-eye",round:"",size:"sm",onClick:S=>c.$emit("viewControl",y.key)},null,8,["onClick"]),o.isDiagnosticoActive?(s(),p(C,{key:0,color:"warning",icon:"fas fa-pencil",round:"",size:"sm",onClick:S=>c.$emit("editControl",y.key)},null,8,["onClick"])):V("",!0),o.isDiagnosticoActive?(s(),p(C,{key:1,color:"negative",icon:"fas fa-trash-can",round:"",size:"sm",onClick:S=>u(y.key)},null,8,["onClick"])):V("",!0)]),_:2},1024)]),_:2},1024)]),"body-cell-medicamentos":n(y=>[a(re,{class:"text-left"},{default:n(()=>[_("ul",null,[(s(!0),w(U,null,j(y.value,(S,F)=>(s(),w("li",{key:F},N(S),1))),128))])]),_:2},1024)]),"body-cell-complicaciones":n(y=>[a(re,{class:"text-left"},{default:n(()=>[_("ul",null,[(s(!0),w(U,null,j(y.value,(S,F)=>(s(),w("li",{key:F},N(S),1))),128))])]),_:2},1024)]),_:1},8,["rows"]))}}),ae=class{static fetchAll(e){return ae._api.get(`${ae._endpoint}`,e)}static async create(e){await ae._api.post(`${ae._endpoint}`,e)}static async update(e,t){await ae._api.patch(`${ae._endpoint}/${t}`,e)}};let ce=ae;O(ce,"_api",ve),O(ce,"_endpoint","/pacientes");class Wa{static async run(e){try{await ce.create(e)}catch(t){throw t}}}class Xa{static async run(e){try{return(await ce.fetchAll({search:`numero_documento:${e}`})).data().data[0]}catch(t){throw t}}}class Za{static async run(e,t){try{await ce.update(e,t)}catch(l){throw l}}}function eo(){const o=E(),e=E(!1),{fetch:t,diagnosticos:l,isDiagnosticosEmpty:r}=Aa();return{paciente:o,diagnosticos:l,isDiagnosticosEmpty:r,isLoading:e,fetch:async u=>{e.value=!0,o.value=void 0;try{o.value=await Xa.run(u),l.value=void 0,o.value&&await t(o.value.id),e.value=!1}catch{e.value=!1}},fetchDiagnosticos:t}}function ao(){return ue(o=>Wa.run(o))}function oo(){return ue(({data:o,id:e})=>Za.run(o,e))}const to={class:"col-xs-12 col-sm-4"},no=G({__name:"PacienteCreateForm",emits:["submit","cancel"],setup(o,{emit:e}){const t=e,{data:l}=Re(),r=B(()=>l.value?l.value.map(d=>({label:d.nombre,value:d.id})):[]),m=B(()=>{const d=r.value.find(x=>x.value==Number(S.tipo_documento_id));return d?d.label==="DNI":!1}),u=_e().shape({nombres:h().trim().required().label("Nombres"),apellido_paterno:h().trim().required().label("Apellido Paterno"),apellido_materno:h().trim().required().label("Apellido Materno"),direccion:h().trim().required().label("Direccion"),tipo_documento_id:h().required().label("Tipo de Documento"),numero_documento:oe().typeError("Debe ingresar un n\xFAmero").required().label("N\xFAmero de Documento"),fecha_nacimiento:h().trim().required().label("Fecha de Nacimiento"),telefono:oe().typeError("Tel\xE9fono debe ser un numero").integer().positive().required().label("Tel\xE9fono"),edad:oe().typeError("Edad debe ser un numero").integer().positive().required().label("Edad"),historia_clinica:h().required().label("Historia Clinica"),sexo:h().required().label("Sexo")}),{handleSubmit:c,setFieldValue:v,setErrors:y,values:S,resetForm:F}=be({validationSchema:u}),{isLoading:I,mutateAsync:D}=ao(),A=c(async d=>{await D(d,{onSuccess:()=>{P.success("Paciente registrado correctamente."),t("submit",d.numero_documento)},onError:x=>{y(x.data.errors)}})}),{fetch:W,reniec:q,isLoading:M}=ca(),X=async()=>{if(await W(S.numero_documento),q.value){v("nombres",q.value.nombres),v("apellido_paterno",q.value.apellido_paterno),v("apellido_materno",q.value.apellido_materno),v("direccion",q.value.direccion),v("sexo",q.value.sexo==="1"?"Masculino":"Femenino");var d=q.value.fecha_nacimiento.split("/");const x=se.local(Number(d[2]),Number(d[1]),Number(d[0]));x.isValid&&v("fecha_nacimiento",x.toISODate())}else F()},{calcularEdad:K}=Be();return ze(()=>S.fecha_nacimiento,d=>{d&&v("edad",K(d))}),(d,x)=>(s(),p(de,{loading:i(I),onSubmit:i(A),onCancel:x[0]||(x[0]=Q=>d.$emit("cancel"))},{default:n(()=>[a(ne,{options:r.value,name:"tipo_documento_id",class:"col-xs-12 col-sm-4",label:"Tipo de Documento",loading:!1,required:""},null,8,["options"]),a(g,{name:"numero_documento",label:"N\xB0 de Documento",class:"col-xs-12 col-sm-4",required:""},{after:n(()=>[m.value?(s(),p(C,{key:0,round:"",dense:"",icon:"search",color:"primary",loading:i(M),onClick:X},{default:n(()=>[a(ua,null,{default:n(()=>[z(" Buscar en RENIEC ")]),_:1})]),_:1},8,["loading"])):V("",!0)]),_:1}),a(g,{name:"nombres",label:"Nombres",class:"col-xs-12 col-sm-4",required:""}),a(g,{name:"apellido_paterno",label:"Apellido Paterno",class:"col-xs-12 col-sm-4",required:""}),a(g,{name:"apellido_materno",label:"Apellido Materno",class:"col-xs-12 col-sm-4",required:""}),_("div",to,[a(we,{required:"",name:"fecha_nacimiento",label:"Fecha Nacimiento"})]),a(g,{name:"direccion",label:"Direcci\xF3n",class:"col-xs-12 col-sm-4",required:""}),a(g,{name:"telefono",label:"Tel\xE9fono",class:"col-xs-12 col-sm-4",required:""}),a(g,{name:"edad",label:"Edad",class:"col-xs-12 col-sm-4",required:""}),a(g,{name:"historia_clinica",label:"Historia Cl\xEDnica",class:"col-xs-12 col-sm-4",required:""}),a(da,{required:"",options:[{label:"Masculino",value:"Masculino"},{label:"Femenino",value:"Femenino"}],name:"sexo",label:"Sexo",class:"col-xs-12 col-sm-8"})]),_:1},8,["loading","onSubmit"]))}}),lo=G({__name:"PacienteEditForm",props:{paciente:{type:Object,required:!0}},emits:["cancel"],setup(o){const e=o,t=_e().shape({nombres:h().trim().required().label("Nombres"),apellido_paterno:h().trim().required().label("Apellido Paterno"),apellido_materno:h().trim().required().label("Apellido Materno"),tipo_documento_id:oe().required().label("Tipo de Documento"),direccion:h().trim().required().label("Direccion"),numero_documento:oe().typeError("Debe ingresar un n\xFAmero").required().label("N\xFAmero de Documento"),fecha_nacimiento:h().trim().required().label("Fecha de Nacimiento"),telefono:oe().typeError("Tel\xE9fono debe ser un numero").integer().positive().required().label("Tel\xE9fono"),edad:oe().typeError("Edad debe ser un numero").integer().positive().required().label("Edad"),historia_clinica:h().trim().required().label("Historia Clinica"),sexo:h().required().label("Sexo")}),{handleSubmit:l,setErrors:r}=be({validationSchema:t,initialValues:e.paciente}),{isLoading:m,mutate:u}=oo(),c=l(async v=>{u({data:v,id:e.paciente.id},{onSuccess:()=>{P.success()},onError:y=>{r(y.data.errors)}})});return(v,y)=>(s(),p(de,{loading:i(m),onSubmit:i(c),onCancel:y[0]||(y[0]=S=>v.$emit("cancel"))},{default:n(()=>[a(g,{outlined:!1,borderless:!0,readonly:"",name:"nombres",label:"Nombres",class:"col-xs-12 col-sm-4",required:""}),a(g,{outlined:!1,borderless:!0,readonly:"",name:"apellido_paterno",label:"Apellido Paterno",class:"col-xs-12 col-sm-4",required:""}),a(g,{outlined:!1,borderless:!0,readonly:"",name:"apellido_materno",label:"Apellido Materno",class:"col-xs-12 col-sm-4",required:""}),a(g,{outlined:!1,borderless:!0,readonly:"",name:"tipo_documento",class:"col-xs-12 col-sm-4",label:"Tipo de Documento",loading:!1,required:""}),a(g,{outlined:!1,borderless:!0,readonly:"",name:"numero_documento",label:"N\xB0 de Documento",class:"col-xs-12 col-sm-4",required:""}),a(g,{outlined:!1,borderless:!0,readonly:"",name:"fecha_nacimiento",label:"Fecha de Nacimiento",class:"col-xs-12 col-sm-4",required:""}),a(g,{name:"direccion",label:"Direcci\xF3n",class:"col-xs-12 col-sm-4",required:""}),a(g,{name:"telefono",label:"Tel\xE9fono",class:"col-xs-12 col-sm-4",required:""}),a(g,{outlined:!1,borderless:!0,readonly:"",name:"edad",label:"Edad",class:"col-xs-12 col-sm-4",required:""}),a(g,{name:"historia_clinica",label:"Historia Cl\xEDnica",class:"col-xs-12 col-sm-4",required:""}),a(g,{outlined:!1,borderless:!0,readonly:"",name:"sexo",label:"Sexo",class:"col-xs-12 col-sm-4",required:""})]),_:1},8,["loading","onSubmit"]))}}),Ae=class{static fetchAll(){return Ae._api.get(`${Ae._endpoint}`)}};let Ce=Ae;O(Ce,"_api",ve),O(Ce,"_endpoint","/enfermedades");class io{static async run(){try{return(await Ce.fetchAll()).data().data}catch(e){throw P.error("Hubo un error al traer los Enfermedads..."),e}}}function so(){const o=async()=>await io.run(),{data:e,isLoading:t,refetch:l,error:r}=De([qe.ENFERMEDAD_ALL],o);return{data:e,isLoading:t,error:r,refetch:l}}const Te=class{static fetchAll(){return Te._api.get(`${Te._endpoint}`)}};let xe=Te;O(xe,"_api",ve),O(xe,"_endpoint","/financiamientos");class ro{static async run(){try{return(await xe.fetchAll()).data().data}catch(e){throw P.error("Hubo un error al traer los financiamientos..."),e}}}function co(){const o=async()=>await ro.run(),{data:e,isLoading:t,refetch:l,error:r}=De([qe.FINANCIAMIENTO_ALL],o);return{data:e,isLoading:t,error:r,refetch:l}}const uo={class:"col-xs-12 col-sm-6"},mo=G({__name:"DiagnosticoCreateForm",props:{pacienteId:{type:String,required:!0}},emits:["submit","cancel"],setup(o,{emit:e}){const t=o,l=e,{data:r}=co(),{data:m}=Pe(),{data:u}=so(),c=B(()=>r.value?r.value.map(d=>({label:d.nombre,value:d.id})):[]),v=B(()=>m.value?m.value.map(d=>({label:d.nombres+" "+d.apellido_paterno+" "+d.apellido_materno,value:d.id})):[]),y=B(()=>u.value?u.value.map(d=>({label:d.nombre,value:d.id})):[]),S=_e().shape({financiamiento_id:h().trim().required().label("Financiamiento"),paciente_id:h().trim().required().label("Paciente"),empleado_id:h().trim().required().label("Medico"),observaciones:h().trim().required().max(100).label("Observaciones"),enfermedades:ke().required().label("Enfermedades")}),{handleSubmit:F,setFieldValue:I}=be({validationSchema:S});I("paciente_id",t.pacienteId);const D=E(),{arr_seleccionados:A,remove:W,push:q}=Fe("enfermedades"),{mutate:M,isLoading:X}=ya(),K=F(async d=>{M(d,{onSuccess:()=>{P.success("Diagnostico registrado correctamente"),l("submit",t.pacienteId)},onError:x=>{console.log(x)}})});return(d,x)=>(s(),p(de,{loading:i(X),onSubmit:i(K),onCancel:x[2]||(x[2]=Q=>d.$emit("cancel"))},{default:n(()=>[a(ne,{options:c.value,name:"financiamiento_id",label:"Financiamiento",class:"col-xs-12 col-sm-6"},null,8,["options"]),a(ne,{options:v.value,name:"empleado_id",label:"Medico",class:"col-xs-12 col-sm-6"},null,8,["options"]),_("div",uo,[a(Ve,{modelValue:D.value,"onUpdate:modelValue":x[1]||(x[1]=Q=>D.value=Q),options:y.value,borderless:"",dense:"",name:"enfermedad",label:"Enfermedades"},{after:n(()=>[a(C,{disable:!D.value,round:"",dense:"",icon:"add",color:"positive",onClick:x[0]||(x[0]=()=>{i(q)(D.value),D.value=void 0})},null,8,["disable"])]),_:1},8,["modelValue","options"]),a(pe,null,{default:n(()=>[(s(!0),w(U,null,j(i(A),(Q,ie)=>(s(),p(le,{key:Q.value},{default:n(()=>[a(L,null,{default:n(()=>[z(N(Q.label),1)]),_:2},1024),a(L,{side:""},{default:n(()=>[a(C,{round:"",flat:"",size:"lg",padding:"0",color:"negative",icon:"cancel",onClick:f=>i(W)(ie)},null,8,["onClick"])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),a(g,{type:"textarea",name:"observaciones",label:"Descripcion",class:"col-xs-12 col-sm-6"})]),_:1},8,["loading","onSubmit"]))}}),fo={class:"col-xs-12 col-sm-6"},po=_("div",null,"Enfermedades",-1),vo=G({__name:"DiagnosticoEditForm",props:{diagnostico:{type:Object,required:!0}},emits:["submit","cancel"],setup(o,{emit:e}){const t=o,l=e,{mutateAsync:r,isLoading:m}=ga(),u=()=>{te.fire({title:"\xBFEst\xE1 seguro de finalizar este diagnostico?",text:"No podra deshacer los cambios!",input:"textarea",inputLabel:"Motivo",inputPlaceholder:"Describa el motivo...",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Si",cancelButtonText:"No",showLoaderOnConfirm:!0,preConfirm:async c=>{await r({motivo:c,id:t.diagnostico.id},{onSuccess:async()=>{P.success("Diagnostico finalizaado correctamente."),l("submit")},onError:()=>{te.hideLoading()}})},allowOutsideClick:()=>!te.isLoading()})};return(c,v)=>(s(),p(de,{loading:i(m),onSubmit:u},{actions:n(()=>[a(Le,{class:"col-12 justify-end q-pa-none q-pt-md"},{default:n(()=>[a(C,{label:"Cancelar",color:"primary","no-caps":"",outline:"",onClick:v[0]||(v[0]=y=>c.$emit("cancel"))}),o.diagnostico.estado?(s(),p(C,{key:0,label:"Finalizar",type:"submit",icon:"fas fa-hourglass-end",color:"negative","no-caps":""})):V("",!0)]),_:1})]),default:n(()=>[a(g,{borderless:"",outlined:!1,readonly:"",name:"financiamiento_id",label:"Financiamiento",class:"col-xs-12 col-sm-6",value:o.diagnostico.financiamiento.data.nombre},null,8,["value"]),a(g,{borderless:"",outlined:!1,readonly:"",name:"medico_id",label:"Medico",class:"col-xs-12 col-sm-6",value:o.diagnostico.medico.data.nombres+" "+o.diagnostico.medico.data.apellido_paterno+" "+o.diagnostico.medico.data.apellido_materno},null,8,["value"]),_("div",fo,[po,_("ul",null,[(s(!0),w(U,null,j(o.diagnostico.enfermedades.data,y=>(s(),w("li",{key:y.id},N(y.nombre),1))),128))])]),a(g,{borderless:"",autogrow:"",outlined:!1,readonly:"",type:"textarea",name:"observaciones",label:"Descripcion",class:"col-xs-12 col-sm-6",value:o.diagnostico.observaciones},null,8,["value"]),a(g,{borderless:"",autogrow:"",outlined:!1,readonly:"",type:"textarea",name:"motivo_finalizacion",label:"Observaciones",class:"col-xs-12 col-sm-6",value:o.diagnostico.motivo_finalizacion},null,8,["value"])]),_:1},8,["loading"]))}});var Qe=Ze({name:"QTr",props:{props:Object,noHover:Boolean},setup(o,{slots:e}){const t=B(()=>"q-tr"+(o.props===void 0||o.props.header===!0?"":" "+o.props.__trClass)+(o.noHover===!0?" q-tr--no-hover":""));return()=>ea("tr",{class:t.value},aa(e.default))}});const bo={key:2},_o={key:3},yo={class:"row"},go={class:"col-xs-12 col-sm-6"},ho=G({__name:"DiagnosticosTable",props:{diagnosticos:{type:Array,required:!0}},emits:["select"],setup(o){const{formatDate:e}=Be(),t=[{name:"fecha",align:"center",label:"Fecha",field:"created_at",format:l=>e(l)},{name:"enfermedades",align:"left",label:"Enfermedades",field:l=>l.enfermedades.data.map(r=>r.nombre)},{name:"Descripcion",align:"center",label:"Descripcion",field:"observaciones"},{name:"estado",align:"center",label:"Estado",field:"estado"},{name:"actions",align:"center",label:"Acciones",field:"actions"}];return(l,r)=>(s(),p(i(He),{columns:t,rows:o.diagnosticos,"row-key":"id",loading:!1},{header:n(m=>[a(Qe,{props:m},{default:n(()=>[a(Ue,{"auto-width":""}),(s(!0),w(U,null,j(m.cols,u=>(s(),p(Ue,{key:u.name,props:m},{default:n(()=>[z(N(u.label),1)]),_:2},1032,["props"]))),128))]),_:2},1032,["props"])]),body:n(m=>[a(Qe,{props:m},{default:n(()=>[a(re,{"auto-width":""},{default:n(()=>[a(C,{size:"sm",color:"accent",round:"",dense:"",icon:m.expand?"remove":"add",onClick:u=>m.expand=!m.expand},null,8,["icon","onClick"])]),_:2},1024),(s(!0),w(U,null,j(m.cols,u=>(s(),p(re,{key:u.name,props:m,"auto-width":""},{default:n(()=>[u.name==="actions"?(s(),p(C,{key:0,flat:"",color:"primary",icon:"fas fa-check",round:"",padding:"0",onClick:c=>l.$emit("select",m.key)},null,8,["onClick"])):u.name==="estado"?(s(),p(ma,{key:1,color:u.value?"positive":"negative",rounded:"",class:"q-mr-sm",label:u.value?"Activo":"Inactivo"},null,8,["color","label"])):u.name==="enfermedades"?(s(),w("ul",bo,[(s(!0),w(U,null,j(u.value,(c,v)=>(s(),w("li",{key:v},N(c),1))),128))])):(s(),w("div",_o,N(u.value),1))]),_:2},1032,["props"]))),128))]),_:2},1032,["props"]),oa(a(Qe,{props:m},{default:n(()=>[a(re,{colspan:"100%"},{default:n(()=>[_("div",yo,[_("div",go,[a(pe,{dense:""},{default:n(()=>[a(le,null,{default:n(()=>[a(L,null,{default:n(()=>[z("Establecimiento:")]),_:1}),a(L,{side:""},{default:n(()=>[z(N(m.row.establecimiento.data.nombre),1)]),_:2},1024)]),_:2},1024),a(le,null,{default:n(()=>[a(L,null,{default:n(()=>[z("Observaciones:")]),_:1}),a(L,{side:""},{default:n(()=>[z(N(m.row.motivo_finalizacion),1)]),_:2},1024)]),_:2},1024)]),_:2},1024)])])]),_:2},1024)]),_:2},1032,["props"]),[[ta,m.expand]])]),_:1},8,["rows"]))}}),Co=G({__name:"DiagnosticosListModal",props:{modelValue:{type:Boolean},diagnosticos:{},paciente:{}},emits:["update:modelValue","submit","select","addDiagnostico"],setup(o,{emit:e}){const t=o,l=e,r=fa(t,"modelValue",l),m=()=>{t.diagnosticos.some(u=>u.estado===!0)?P.error("Ya existe un diagnostico activo."):l("addDiagnostico")};return(u,c)=>(s(),p(la,{modelValue:i(r),"onUpdate:modelValue":c[1]||(c[1]=v=>na(r)?r.value=v:null)},{default:n(()=>[a(fe,{style:{width:"1200px","max-width":"90vw"}},{default:n(()=>[a(Y,null,{default:n(()=>[a(le,null,{default:n(()=>[a(L,{avatar:""},{default:n(()=>[a(ye,{color:"primary",name:"fas fa-circle-exclamation",size:"xl"})]),_:1}),a(L,null,{default:n(()=>[a(je,{class:"text-h6"},{default:n(()=>[z("Diagnosticos del Paciente")]),_:1}),a(je,{lines:"2",class:"text-subtitle2 text-italic"},{default:n(()=>[z(" Por favor, seleccione un diagnostico para continuar. ")]),_:1})]),_:1}),a(L,{avatar:""},{default:n(()=>[a(C,{flat:"",color:"primary",icon:"fas fa-folder-plus",label:"Nuevo","no-caps":"",onClick:m})]),_:1})]),_:1})]),_:1}),a(Y,{class:"row"},{default:n(()=>[a($e,{borderless:"",readonly:"","model-value":u.paciente.nombres+" "+u.paciente.apellido_paterno+" "+u.paciente.apellido_materno,label:"Nombre Completo",class:"col-6"},null,8,["model-value"]),a($e,{borderless:"",readonly:"","model-value":u.paciente.historia_clinica,label:"Historia Clinica",class:"col-6"},null,8,["model-value"]),a($e,{borderless:"",readonly:"","model-value":u.paciente.tipo_documento,label:"Tipo de Documento",class:"col-6"},null,8,["model-value"]),a($e,{borderless:"",readonly:"","model-value":u.paciente.numero_documento,label:"Numero de Documento",class:"col-6"},null,8,["model-value"])]),_:1}),a(Y,null,{default:n(()=>[a(ho,{diagnosticos:u.diagnosticos,onSelect:c[0]||(c[0]=v=>u.$emit("select",v))},null,8,["diagnosticos"])]),_:1})]),_:1})]),_:1},8,["modelValue"]))}}),xo={class:"row q-col-gutter-md"},wo={class:"col-12"},ko={key:2,class:"col-12 row justify-center"},Fo={class:"col-auto"},Do=_("div",{class:"col-12 text-center text-h6"}," Lo sentimos. \xA1No se encontr\xF3 ningun paciente! ",-1),qo={class:"col-12 row justify-center"},$o={class:"col-auto"},Eo=_("div",{class:"col-12 text-center text-h6"}," Lo sentimos. \xA1No se encontr\xF3 ningun diagn\xF3stico!. Porfavor registre uno para empezar :) ",-1),So={key:1},Ao={class:"col-12 row justify-center"},To={class:"col-auto"},Lo=_("div",{class:"col-12 text-center text-h6"}," Por favor seleccione un diagnostico. :) ",-1),Bo={class:"col-12 row justify-center"},No={class:"col-auto"},Io=_("div",{class:"col-12 text-center text-h6"}," Lo sentimos. \xA1No se encontr\xF3 ningun control!. Porfavor registre uno para empezar. ",-1),Zo=G({__name:"DiagnosticoCreate",setup(o){const{data:e}=Re(),t=E(!1),l=E(!1),r=E(!1),m=B(()=>e.value?e.value.map(T=>({label:T.nombre,value:T.id})):[]),u=_e().shape({numero_documento:oe().typeError("Debe ingresar un n\xFAmero").min(8).required().label("N\xFAmero de Documento"),tipo_documento_id:h().required().label("Tipo de Documento")}),{handleSubmit:c,resetForm:v}=be({validationSchema:u}),{fetch:y,fetchDiagnosticos:S,paciente:F,isLoading:I,diagnosticos:D,isDiagnosticosEmpty:A}=eo(),W=c(async T=>{M(),await y(T.numero_documento),F.value?te.fire({title:"Exito!",text:"Paciente encontrado correctamente!",icon:"success"}).then(({isConfirmed:$})=>{$&&(A.value||(q.value=!0))}):te.fire({title:"Informaci\xF3n!",text:"No se encontro el paciente indicado!",icon:"info"})}),q=E(!1),M=()=>{d.value=void 0,F.value=void 0,t.value=!1,l.value=!1,H(),v()},X=async T=>{M(),await y(T)},K=async T=>{H(),await S(T)},{diagnostico:d,isControlesEmpty:x,controles:Q,fetchControles:ie,fetch:f}=Sa(),b=async T=>{await f(T),q.value=!1},k=async()=>{H(),q.value=!1,l.value=!0},H=()=>{d.value=void 0,l.value=!1,me()},{control:J,fetch:Oe}=$a(),me=()=>{J.value=void 0,r.value=!1},Ie=async T=>{me(),await ie(T)},Ke=async T=>{J.value=void 0,await Oe(T)},Je=async T=>{J.value=void 0,await Oe(T)};return(T,$)=>(s(),w("div",xo,[a(sa,{class:"col-12 row q-col-gutter-lg items-start justify-center",onSubmit:i(W)},{default:n(()=>[a(ne,{options:m.value,name:"tipo_documento_id",class:"col-xs-12 col-sm-4",label:"Tipo de Documento",loading:!1,required:""},null,8,["options"]),a(g,{name:"numero_documento",label:"N\xB0 de Documento",class:"col-xs-12 col-sm-4",required:""}),a(Le,{class:"col-auto justify-center"},{default:n(()=>[a(C,{color:"primary",outline:"",size:"lg",icon:"search",label:"Buscar","no-caps":"",type:"submit",loading:i(I)},null,8,["loading"])]),_:1})]),_:1},8,["onSubmit"]),_("div",wo,[a(Me,{icon:"fas fa-person",label:"Datos del Paciente",caption:"Editar / Crear"},{default:n(()=>[a(fe,{class:"my-card"},{default:n(()=>[i(I)?V("",!0):(s(),p(Y,{key:0},{default:n(()=>[i(F)?(s(),p(lo,{key:0,paciente:i(F),onCancel:M},null,8,["paciente"])):!i(F)&&t.value?(s(),p(no,{key:1,onCancel:M,onSubmit:X})):V("",!0),!i(F)&&!t.value?(s(),w("div",ko,[_("div",Fo,[a(ye,{name:"fas fa-face-frown",size:"xl"})]),Do,a(C,{class:"q-mt-lg",color:"primary",icon:"fas fa-plus","no-caps":"",label:"Agregar nuevo paciente",outline:"",onClick:$[0]||($[0]=ee=>t.value=!t.value)})])):V("",!0)]),_:1}))]),_:1})]),_:1}),i(F)?(s(),p(Me,{key:0,icon:"fas fa-folder-open",label:"Diagn\xF3stico",caption:"Editar"},{default:n(()=>[a(Co,{modelValue:q.value,"onUpdate:modelValue":$[1]||($[1]=ee=>q.value=ee),paciente:i(F),diagnosticos:i(D)||[],onSelect:b,onAddDiagnostico:k},null,8,["modelValue","paciente","diagnosticos"]),i(d)?(s(),p(fe,{key:1},{default:n(()=>[a(Y,null,{default:n(()=>[a(vo,{diagnostico:i(d),onCancel:H,onSubmit:$[5]||($[5]=ee=>K(i(F).id))},null,8,["diagnostico"])]),_:1})]),_:1})):(s(),p(fe,{key:0,class:"my-card"},{default:n(()=>[i(A)&&!l.value?(s(),p(Y,{key:0},{default:n(()=>[_("div",qo,[_("div",$o,[a(ye,{name:"fas fa-face-frown",size:"xl"})]),Eo,a(C,{class:"q-mt-lg",color:"primary",icon:"fas fa-plus","no-caps":"",label:"Agregar nuevo diagnostico",outline:"",onClick:$[2]||($[2]=ee=>l.value=!l.value)})])]),_:1})):V("",!0),!i(A)&&!l.value?(s(),w("div",So,[_("div",Ao,[_("div",To,[a(ye,{name:"fas fa-face-grin-beam-sweat",size:"xl"})]),Lo,a(C,{class:"q-mt-lg",color:"primary",icon:"fas fa-list-check","no-caps":"",label:"Visualizar Diagnosticos",outline:"",onClick:$[3]||($[3]=ee=>q.value=!q.value)})])])):(s(),p(Y,{key:2},{default:n(()=>[l.value?(s(),p(mo,{key:0,"paciente-id":i(F).id,onCancel:$[4]||($[4]=ee=>l.value=!1),onSubmit:K},null,8,["paciente-id"])):V("",!0)]),_:1}))]),_:1}))]),_:1})):V("",!0),i(d)?(s(),p(Me,{key:1,icon:"fas fa-list-ul",label:"Controles",caption:"Editar"},{default:n(()=>[i(J)?(s(),p(fe,{key:1},{default:n(()=>[i(d).estado?(s(),p(Y,{key:0},{default:n(()=>[a(Ua,{control:i(J),"diagnostico-id":i(d).id,onCancel:me,onSubmit:Ie},null,8,["control","diagnostico-id"])]),_:1})):(s(),p(Y,{key:1},{default:n(()=>[a(Ka,{control:i(J),onCancel:me},null,8,["control"])]),_:1}))]),_:1})):(s(),p(fe,{key:0,class:"my-card"},{default:n(()=>[i(x)&&!r.value&&i(d).estado?(s(),p(Y,{key:0},{default:n(()=>[_("div",Bo,[_("div",No,[a(ye,{name:"fas fa-face-frown",size:"xl"})]),Io,a(C,{class:"q-mt-lg",color:"primary",icon:"fas fa-plus","no-caps":"",label:"Agregar nuevo control",outline:"",onClick:$[6]||($[6]=ee=>r.value=!r.value)})])]),_:1})):V("",!0),!i(x)&&!r.value?(s(),p(Y,{key:1},{default:n(()=>[a(Ja,{controles:i(Q),"is-diagnostico-active":i(d).estado,onAddControl:$[7]||($[7]=()=>{me(),r.value=!0}),onEditControl:Ke,onDeleteControl:$[8]||($[8]=ee=>Ie(i(d).id)),onViewControl:Je},null,8,["controles","is-diagnostico-active"])]),_:1})):(s(),p(Y,{key:2},{default:n(()=>[r.value?(s(),p(Va,{key:0,"ultimo-control":i(Q)[i(Q).length-1],"diagnostico-id":i(d).id,onCancel:me,onSubmit:Ie},null,8,["ultimo-control","diagnostico-id"])):V("",!0)]),_:1}))]),_:1}))]),_:1})):V("",!0)])]))}});export{Zo as default};

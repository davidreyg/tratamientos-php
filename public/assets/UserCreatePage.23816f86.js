import{U as S,X as p,Z as y,$ as o,b4 as N,a0 as E,r as F,j as u,af as k,o as b,aj as B,a4 as a,w as R,ac as l,aW as V,ai as h,aC as Q,e as j,a1 as d,a9 as A,d as L}from"./index.ddaffeba.js";import{u as M}from"./establecimientoFetchAllQuery.4c2447b5.js";import{u as P}from"./roleListQuery.169bf3c7.js";import{U as T}from"./UserApi.bbebf907.js";import{_ as W}from"./BaseCheckBoxGroup.e838326f.js";import"./EstablecimientoApi.0ae636f8.js";import"./RoleApi.e0b2cf20.js";function X(){return S(n=>T.create(n))}const Z={class:"row"},z={class:"col-12"},D=p({__name:"UserCreateForm",emits:["submit","cancel"],setup(n,{emit:r}){const s=r,i=y().shape({name:o().trim().min(2).required().label("Usuario"),nombre_completo:o().trim().min(2).required().label("Nombre Completo"),cargo:o().trim().min(2).required().label("Cargo"),password:o().trim().min(2).required().label("Contrase\xF1a"),establecimiento_id:o().required().label("Establecimiento"),role_ids:N().of(o().required()).required().label("Roles")}),{handleSubmit:_,setErrors:f,resetForm:$}=E({validationSchema:i,initialValues:{password:"password",role_ids:[]}}),C=F({limit:0}),{data:m}=M(C),v=u(()=>m.value?m.value.map(e=>({label:e.nombre,value:e.id})):[]),{roles:c}=P(),g=u(()=>c.value?c.value.map(e=>({label:e.display_name,value:Number(e.id)})):[]),{isLoading:q,mutate:x,reset:U}=X(),w=_(async e=>{x(e,{onSuccess:()=>{k.success(),s("submit")},onError:t=>{$(),U.value(),f(t.data.errors)}})},e=>{console.log(e)});return(e,t)=>(b(),B("div",Z,[a(A,{class:"col-sm-8 col-xs-12 col-md-6",loading:d(q),onSubmit:d(w),onCancel:t[0]||(t[0]=G=>e.$emit("cancel"))},{default:R(()=>[a(l,{name:"nombre_completo",label:"Nombre Completo",class:"col-12"}),a(l,{name:"name",label:"Usuario",class:"col-xs-12 col-sm-6"}),a(l,{name:"password",label:"Contrase\xF1a",class:"col-xs-12 col-sm-6",type:"password"}),a(V,{options:v.value,name:"establecimiento_id",class:"col-xs-12 col-sm-6",label:"Establecimiento",loading:!1,required:""},null,8,["options"]),a(l,{name:"cargo",label:"Cargo",class:"col-xs-12 col-sm-6"}),h("div",z,[a(Q,{spaced:""}),j(" Roles: ")]),a(W,{name:"role_ids",label:"Roles",options:g.value},null,8,["options"])]),_:1},8,["loading","onSubmit"])]))}}),ae=p({__name:"UserCreatePage",setup(n){return(r,s)=>(b(),L(D,{onSubmit:s[0]||(s[0]=i=>r.$router.back()),onCancel:s[1]||(s[1]=i=>r.$router.back())}))}});export{ae as default};

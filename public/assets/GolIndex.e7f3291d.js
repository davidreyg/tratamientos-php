import{_ as f}from"./BasePage.2a141dec.js";import{h,j as v,m as u,q as d,A as y,u as s,F as _,ar as A}from"./index.8e1e529b.js";import{_ as G}from"./GolsTable.cb6831f1.js";import{a as w}from"./index.1c9af67c.js";import{Q as k}from"./QueryTypes.b72dec59.js";import{G as B}from"./GolApi.f6c0f150.js";import"./QPage.29776a48.js";import"./BaseTable.01e650dc.js";import"./QSelect.0d489ee9.js";import"./QField.57308312.js";import"./rtl.b51694b1.js";import"./useLuxonFormat.a1fe62c3.js";import"./datetime.b26a663f.js";class F{static async run(e){try{return(await B.fetchAll({include:"school",...e})).data()}catch(t){throw t}}}function L(o){const e=async()=>await F.run(o.value),{data:t,isLoading:r,isSuccess:i,isError:c,isFetching:l,refetch:p}=w([k.GOL_ALL,o==null?void 0:o.value],e,{keepPreviousData:!0});return{data:t,isLoading:r,isSuccess:i,isError:c,isFetching:l,refetch:p}}const I=h({__name:"GolIndex",setup(o){const e=v({page:1}),{data:t,isFetching:r,isSuccess:i,isLoading:c,refetch:l}=L(e),p=()=>{A.success("Registro eliminado correctamente."),l.value()},g=a=>{e.value.page=a.pagination.page,e.value.limit=a.pagination.rowsPerPage,e.value.search=a.filter,e.value.orderBy=a.pagination.sortBy,e.value.sortedBy=a.pagination.descending?"desc":"asc"};return(a,n)=>(u(),d(f,{title:"Goles",loading:s(c),"with-add":"",onAdd:n[1]||(n[1]=m=>a.$router.push({name:"gols.create"}))},{content:y(()=>[s(i)&&s(t)?(u(),d(G,{key:0,data:s(t).data,loading:s(r),"server-pagination":s(t).meta.pagination,onEdit:n[0]||(n[0]=m=>a.$router.push({name:"gols.edit",params:{id:m}})),onDestroyOne:p,onRequest:g},null,8,["data","loading","server-pagination"])):_("",!0)]),_:1},8,["loading"]))}});export{I as default};

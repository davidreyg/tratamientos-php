import{aG as k,aH as E,U as P,X as q,Z as S,$ as w,a0 as N,r as v,o as m,d,w as b,a4 as _,ac as C,ai as h,aC as F,e as Q,a1 as s,at as f,a9 as B,ax as T,aj as U,ad as V,af as A}from"./index.0b61b42a.js";import{_ as L}from"./SkeletonForm.a34e76f0.js";import{u as j}from"./examenFetchAllQuery.63ec083c.js";import{P as $}from"./PaqueteApi.c28671d5.js";import{_ as I}from"./ExamenCardList.1e8b71e8.js";import"./ExamenApi.76925565.js";import"./BaseCheckBoxGroup.cd7da833.js";class M{static async run(e){try{return(await $.fetchOne(e)).data().data}catch(t){throw t}}}class O{static async run(e,t){try{await $.update(e,t)}catch(r){throw r}}}function R(a,e){const t=async()=>await M.run(a),{data:r,isLoading:n,isSuccess:c,isError:i,isFetching:u,refetch:o}=k([E.PAQUETE_ALL,a],t,{enabled:e});return{data:r,isLoading:n,isSuccess:c,isError:i,isFetching:u,refetch:o}}function z(){return P(({data:a,id:e})=>O.run(a,e))}const G={class:"col-12"},H={class:"col-12 row q-col-gutter-sm"},J=q({__name:"PaqueteEditForm",props:{paquete:{type:Object,required:!0}},emits:["submit","cancel"],setup(a,{emit:e}){const t=a,r=e,n=S().shape({nombre:w().trim().min(2).required().label("Nombre")}),{handleSubmit:c,setErrors:i}=N({validationSchema:n,initialValues:t.paquete}),u=v({limit:0,search:"is_active:1",searchJoin:"and"}),{data:o}=j(u),{isLoading:y,mutate:g}=z(),x=c(async p=>{g({data:p,id:t.paquete.id},{onSuccess:()=>{r("submit")},onError:l=>{i(l.data.errors)}})});return(p,l)=>(m(),d(B,{loading:s(y),onSubmit:s(x),onCancel:l[0]||(l[0]=Z=>p.$emit("cancel"))},{default:b(()=>[_(C,{name:"nombre",label:"Nombre",class:"col-12"}),h("div",G,[_(F,{spaced:""}),Q(" Examenes")]),h("div",H,[s(o)?(m(),d(I,{key:0,examens:s(o)},null,8,["examens"])):f("",!0)])]),_:1},8,["loading","onSubmit"]))}}),X={class:"row"},se=q({__name:"PaqueteEditPage",props:{id:{type:Number,required:!0}},setup(a){const e=a,t=T(),{data:r,isSuccess:n,isFetching:c}=R(e.id,!0),i=()=>{A.success("Registro actualizado correctamente"),t.back()};return(u,o)=>(m(),U("div",X,[s(c)?(m(),d(V,{key:0,class:"col-xs-12 col-sm-10 q-pa-lg"},{default:b(()=>[_(L,{class:"col-12",inputs:2})]),_:1})):f("",!0),s(n)&&!s(c)&&s(r)?(m(),d(J,{key:1,class:"col-xs-12 col-sm-10",paquete:s(r),gol:s(r),onSubmit:i,onCancel:o[0]||(o[0]=y=>u.$router.back())},null,8,["paquete","gol"])):f("",!0)]))}});export{se as default};

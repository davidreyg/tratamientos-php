import{W as E,aE as C,aF as $,Y as g,o as c,ak as B,x as y,e as d,w as s,a5 as r,Q as h,a8 as u,f as w,a7 as P,aP as k,aZ as A,aH as _,aG as f,a2 as v,ag as Q}from"./index.1b248b2f.js";import{P as b}from"./PaqueteApi.543d117d.js";import{_ as T}from"./BaseTable.e8ff3788.js";class x{static async run(t){try{await b.destroy(t)}catch(a){throw a}}}class D{static async run(){try{return(await b.fetchAll()).data().data}catch(t){throw t}}}function O(){return E(e=>x.run(e))}function F(){const e=async()=>await D.run(),{data:t,isLoading:a,isSuccess:o,isError:i,isFetching:l,refetch:n}=C([$.PAQUETE_ALL],e);return{data:t,isLoading:a,isSuccess:o,isError:i,isFetching:l,refetch:n}}const L=g({__name:"PaqueteTableActions",props:{id:{type:String,required:!0}},emits:["destroy","edit"],setup(e){return(t,a)=>(c(),B(A,null,[y((c(),d(P,{clickable:"",onClick:a[0]||(a[0]=o=>t.$emit("edit",e.id))},{default:s(()=>[r(u,{avatar:""},{default:s(()=>[r(h,{name:"fas fa-pen-to-square",color:"warning"})]),_:1}),r(u,null,{default:s(()=>[w("Editar")]),_:1})]),_:1})),[[_]]),r(k),y((c(),d(P,{clickable:"",onClick:a[1]||(a[1]=o=>t.$emit("destroy",e.id))},{default:s(()=>[r(u,{avatar:""},{default:s(()=>[r(h,{name:"fas fa-trash-can",color:"negative"})]),_:1}),r(u,null,{default:s(()=>[w("Eliminar")]),_:1})]),_:1})),[[_]])],64))}}),S=g({__name:"PaqueteTable",props:{loading:{type:Boolean,required:!1,default:!1},data:{type:Array,required:!0},serverPagination:{type:Object,default:void 0}},emits:["destroyOne","edit"],setup(e,{emit:t}){const a=t,o=[{name:"nombre",align:"left",label:"Nombre",field:"nombre",sortable:!0},{name:"digitos",align:"center",label:"Digitos",field:"digitos"},{name:"actions",align:"right",label:"",field:"actions"}],{mutateAsync:i}=O(),l=n=>{f.fire({title:"\xBFEst\xE1 seguro de eliminar este registro?",text:"No podra deshacer los cambios!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Si",cancelButtonText:"No",showLoaderOnConfirm:!0,preConfirm:async()=>{await i(n,{onSuccess:async()=>{a("destroyOne",n)},onError:()=>{f.hideLoading()}})},allowOutsideClick:()=>!f.isLoading()})};return(n,p)=>(c(),d(T,{columns:o,data:e.data,loading:e.loading,"row-key":"id","server-pagination":e.serverPagination,"show-grid-toggle":!1},{actions:s(({key:m})=>[r(L,{id:m,onEdit:q=>n.$emit("edit",m),onDestroy:q=>l(m)},null,8,["id","onEdit","onDestroy"])]),_:1},8,["data","loading","server-pagination"]))}}),U=g({__name:"PaqueteListPage",setup(e){const{data:t,isFetching:a,refetch:o}=F(),i=()=>{Q.success("Registro eliminado correctamente."),o.value()};return(l,n)=>(c(),d(S,{data:v(t)||[],loading:v(a),onEdit:n[0]||(n[0]=p=>l.$router.push({name:"paquetes.edit",params:{id:p}})),onDestroyOne:i},null,8,["data","loading"]))}});export{U as default};

import{aH as $,aI as h,W as R,Y as b,$ as k,a0 as E,a1 as C,o as l,e as d,w as y,a5 as g,ad as N,a2 as s,aa as F,ay as q,ak as v,ae as w,au as _,ag as x}from"./index.747a1a42.js";import{_ as B}from"./SkeletonForm.28256859.js";import{R as S}from"./RespuestaApi.4798ebd4.js";function L(e,a){const o=async()=>(await S.fetchOne(e)).data().data,{data:t,isLoading:c,isSuccess:r,isError:u,isFetching:i,refetch:n}=$([h.RESPUESTA_ALL,e],o,{enabled:a});return{data:t,isLoading:c,isSuccess:r,isError:u,isFetching:i,refetch:n}}function Q(){return R(({data:e,id:a})=>S.update(e,a))}const A=b({__name:"RespuestaEditForm",props:{respuesta:{type:Object,required:!0}},emits:["submit","cancel"],setup(e,{emit:a}){const o=e,t=a,c=k().shape({nombre:E().trim().min(2).required().label("Nombre")}),{handleSubmit:r,setErrors:u}=C({validationSchema:c,initialValues:o.respuesta}),{isLoading:i,mutate:n}=Q(),f=r(async p=>{n({data:p,id:o.respuesta.id},{onSuccess:()=>{t("submit")},onError:m=>{u(m.data.errors)}})});return(p,m)=>(l(),d(F,{loading:s(i),onSubmit:s(f),onCancel:m[0]||(m[0]=V=>p.$emit("cancel"))},{default:y(()=>[g(N,{name:"nombre",label:"Nombre",class:"col-12"})]),_:1},8,["loading","onSubmit"]))}}),U={class:"row"},P=b({__name:"RespuestaEditPage",props:{id:{type:Number,required:!0}},setup(e){const a=e,o=q(),{data:t,isSuccess:c,isFetching:r}=L(a.id,!0),u=()=>{x.success("Registro actualizado correctamente"),o.back()};return(i,n)=>(l(),v("div",U,[s(r)?(l(),d(w,{key:0,class:"col-xs-12 col-sm-10 q-pa-lg"},{default:y(()=>[g(B,{class:"col-12",inputs:1})]),_:1})):_("",!0),s(c)&&!s(r)&&s(t)?(l(),d(A,{key:1,class:"col-xs-12 col-sm-10",respuesta:s(t),gol:s(t),onSubmit:u,onCancel:n[0]||(n[0]=f=>i.$router.back())},null,8,["respuesta","gol"])):_("",!0)]))}});export{P as default};

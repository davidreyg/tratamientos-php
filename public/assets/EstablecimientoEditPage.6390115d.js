import{aH as C,aI as x,W as k,Y as $,$ as q,a0 as f,aV as g,b0 as B,a1 as F,o as b,e as _,w as S,a5 as t,ad as u,a2 as o,aa as L,ay as N,ak as T,ae as v,au as y,ag as I}from"./index.747a1a42.js";import{_ as w}from"./SkeletonForm.28256859.js";import{E as h}from"./EstablecimientoApi.a44a843e.js";import{_ as Q}from"./BaseCheckBox.20dc0341.js";function R(e,a){const s=async()=>(await h.fetchOne(e)).data().data,{data:i,isLoading:c,isSuccess:r,isError:l,isFetching:m,refetch:n}=C([x.ESTABLECIMIENTO_ALL,e],s,{enabled:a});return{data:i,isLoading:c,isSuccess:r,isError:l,isFetching:m,refetch:n}}function V(){return k(({data:e,id:a})=>h.update(e,a))}const A=$({__name:"EstablecimientoEditForm",props:{establecimiento:{type:Object,required:!0}},emits:["submit","cancel"],setup(e,{emit:a}){const s=e,i=a,c=q().shape({nombre:f().trim().min(2).required().label("Nombre"),codigo:g().typeError("Codigo debe ser un numero").integer().positive().required().label("Codigo"),direccion:f().trim().min(2).max(60).required().label("Direccion"),telefono:g().typeError("Tel\xE9fono debe ser un numero").integer().positive().nullable().label("Telefono"),ris:f().trim().min(2).max(60).required().label("RIS"),has_lab:B().required().label("\xBFLaboratorio?")}),{handleSubmit:r,setErrors:l}=F({validationSchema:c,initialValues:s.establecimiento}),{isLoading:m,mutate:n}=V(),E=r(async p=>{n({data:p,id:s.establecimiento.id},{onSuccess:()=>{i("submit")},onError:d=>{l(d.data.errors)}})});return(p,d)=>(b(),_(L,{loading:o(m),onSubmit:o(E),onCancel:d[0]||(d[0]=O=>p.$emit("cancel"))},{default:S(()=>[t(u,{name:"nombre",label:"Nombre",class:"col-12"}),t(u,{name:"codigo",label:"Codigo",class:"col-6"}),t(u,{name:"telefono",label:"Telefono",class:"col-6"}),t(u,{name:"direccion",label:"Direccion",class:"col-12"}),t(u,{name:"ris",label:"RIS",class:"col-6"}),t(Q,{name:"has_lab",label:"\xBFTiene Laboratorio?",class:"col-6"})]),_:1},8,["loading","onSubmit"]))}}),M={class:"row"},H=$({__name:"EstablecimientoEditPage",props:{id:{type:Number,required:!0}},setup(e){const a=e,s=N(),{data:i,isSuccess:c,isFetching:r}=R(a.id,!0),l=()=>{I.success("Registro actualizado correctamente"),s.back()};return(m,n)=>(b(),T("div",M,[o(r)?(b(),_(v,{key:0,class:"col-xs-12 col-sm-10 q-pa-lg"},{default:S(()=>[t(w,{class:"col-12",inputs:4})]),_:1})):y("",!0),o(c)&&!o(r)&&o(i)?(b(),_(A,{key:1,class:"col-xs-12 col-sm-10",establecimiento:o(i),onSubmit:l,onCancel:n[0]||(n[0]=E=>m.$router.back())},null,8,["establecimiento"])):y("",!0)]))}});export{H as default};

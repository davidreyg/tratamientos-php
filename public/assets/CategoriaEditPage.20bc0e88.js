import{aG as h,aH as S,U as k,X as _,Z as E,$ as x,a0 as N,o as l,d as p,w as b,a4 as C,ac as v,a1 as e,a9 as F,ax as q,aj as w,ad as A,at as f,af as B}from"./index.ddaffeba.js";import{_ as L}from"./SkeletonForm.7322d735.js";import{C as y}from"./CategoriaApi.e00b553d.js";function Q(a,t){const o=async()=>(await y.fetchOne(a)).data().data,{data:s,isLoading:n,isSuccess:r,isError:i,isFetching:u,refetch:c}=h([S.CATEGORIA_ALL,a],o,{enabled:t});return{data:s,isLoading:n,isSuccess:r,isError:i,isFetching:u,refetch:c}}function O(){return k(({data:a,id:t})=>y.update(a,t))}const R=_({__name:"CategoriaEditForm",props:{categoria:{type:Object,required:!0}},emits:["submit","cancel"],setup(a,{emit:t}){const o=a,s=t,n=E().shape({nombre:x().trim().min(2).required().label("Nombre")}),{handleSubmit:r,setErrors:i}=N({validationSchema:n,initialValues:o.categoria}),{isLoading:u,mutate:c,reset:g}=O(),$=r(async d=>{c({data:d,id:o.categoria.id},{onSuccess:()=>{s("submit")},onError:m=>{g.value(),i(m.data.errors)}})});return(d,m)=>(l(),p(F,{loading:e(u),class:"col-xs-12 col-sm-6",onSubmit:e($),onCancel:m[0]||(m[0]=V=>d.$emit("cancel"))},{default:b(()=>[C(v,{name:"nombre",label:"Nombre",class:"col-12"})]),_:1},8,["loading","onSubmit"]))}}),U={class:"row"},M=_({__name:"CategoriaEditPage",props:{id:{type:Number,required:!0}},setup(a){const t=a,o=q(),{data:s,isSuccess:n,isFetching:r}=Q(t.id,!0),i=()=>{B.success("Registro actualizado correctamente"),o.back()};return(u,c)=>(l(),w("div",U,[e(r)?(l(),p(A,{key:0,class:"col-xs-12 col-sm-6 q-pa-lg"},{default:b(()=>[C(L,{class:"col-12",inputs:1})]),_:1})):f("",!0),e(n)&&!e(r)&&e(s)?(l(),p(R,{key:1,class:"col-xs-12 col-sm-6",categoria:e(s),gol:e(s),onSubmit:i,onCancel:c[0]||(c[0]=g=>u.$router.back())},null,8,["categoria","gol"])):f("",!0)]))}});export{M as default};

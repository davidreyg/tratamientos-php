var S=Object.defineProperty;var T=(t,e,s)=>e in t?S(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s;var w=(t,e,s)=>(T(t,typeof e!="symbol"?e+"":e,s),s);import{bp as $,bq as A,br as E,d as F,n as N,s as O,h as j,j as M,q as k,A as c,u as b,m as h,O as g,E as P,D as B,G as z,K as G,al as H,B as f,b5 as K,am as D,an as I,H as U,a1 as W}from"./index.8e1e529b.js";import{t as Q,b as J}from"./index.62b35bb1.js";import{a as x}from"./index.1c9af67c.js";import{_ as X}from"./BasePage.2a141dec.js";import"./QPage.29776a48.js";const R=new WeakMap;function Y(t,e,s={}){const{mode:d="replace",route:o=$(),router:n=A(),transform:a=p=>p}=s;R.has(n)||R.set(n,new Map);const i=R.get(n);let r=o.params[t];J(()=>{r=void 0});let l;const y=E((p,v)=>(l=v,{get(){return p(),a(r!==void 0?r:Q(e))},set(_){r!==_&&(r=_,i.set(t,_),v(),N(()=>{if(i.size===0)return;const V=Object.fromEntries(i.entries());i.clear();const{params:L,query:q,hash:C}=o;n[Q(d)]({params:{...L,...V},query:q,hash:C})}))}}));return F(()=>o.params[t],p=>{r=p,l()},{flush:"sync"}),y}const m=class{static async fetchAll(){return await m._api.get(m._endpoint,{limit:0})}static async fetchPermissionsByRoleID(e){return await m._api.get(`roles/${e}${m._endpoint}`)}};let u=m;w(u,"_api",O),w(u,"_endpoint","/permissions");class Z{static async run(e){console.log("fetchall modulos task..");try{return(await u.fetchPermissionsByRoleID(e)).data().data}catch(s){throw s}}}class ee{static run(e){try{return e.map(s=>s.id)}catch(s){throw s}}}class se{static async run(e){try{const s=await Z.run(e);return ee.run(s)}catch(s){throw s}}}function te(){const t=async()=>await u.fetchAll().then(a=>a.data().data),e=async a=>await se.run(a);function s(a,i){return x(["role-permissions",a],()=>e(a),{enabled:i,select:r=>r})}const{data:d,isLoading:o,error:n}=x(["permissions"],t);return{permissions:d,isLoading:o,error:n,useRolePermissionsQuery:s}}const ce=j({__name:"RolePermissionPage",setup(t){const e=Y("id",void 0,{transform:Number}),{permissions:s,useRolePermissionsQuery:d}=te(),{data:o,isLoading:n}=d(e.value,!!e.value),a=M([]);return a.value=o.value,(i,r)=>(h(),k(X,{title:"Permisos del Rol",loading:b(n)},{content:c(()=>[g(P(a.value)+" ",1),(h(!0),B(U,null,z(b(s),l=>(h(),B("div",{key:l.id},[G((h(),k(H,{tag:"label"},{default:c(()=>[f(D,{side:"",top:""},{default:c(()=>[f(K,{modelValue:a.value,"onUpdate:modelValue":r[0]||(r[0]=y=>a.value=y),val:l.id},null,8,["modelValue","val"])]),_:2},1024),f(D,null,{default:c(()=>[f(I,null,{default:c(()=>[g(P(l.name),1)]),_:2},1024),f(I,{caption:""},{default:c(()=>[g(P(l.description),1)]),_:2},1024)]),_:2},1024)]),_:2},1024)),[[W]])]))),128))]),_:1},8,["loading"]))}});export{ce as default};

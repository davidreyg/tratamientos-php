import{W as $,Y as E,b0 as I,r as c,b1 as P,H as A,o as l,ak as q,aj as z,a5 as a,w as e,am as g,a2 as s,e as i,ac as y,aX as k,f as b,au as u,ae as C,a6 as p,b2 as O,al as D,ag as F}from"./index.7d3e52a8.js";import{u as M,_ as U,a as j,b as G}from"./OrdenTable.c4e0efb5.js";import{O as H,u as h}from"./laboratorio.store.7f2d183e.js";import"./BaseTable.8a614014.js";function J(){return $(f=>H.registrar(f))}const W={class:"row q-col-gutter-md"},X={class:"col-12"},ae=E({__name:"RegistrarResultadosPage",setup(f){const{$reset:N,fetchOrdenById:R}=h(),{ordenSeleccionada:o,isOrdenLoading:Q}=I(h()),w=c({search:"estado:0",searchJoin:"and",limit:0}),d=c(),{data:m,refetch:x}=M(w),r=c("list"),B=async t=>{d.value=t,await R(t),o.value&&(r.value="edit-examens")},{mutateAsync:V,isLoading:L}=J(),S=async t=>{d.value=t,await V(t,{onSuccess:()=>{F.success("La orden se REGISTRO correctamente."),x.value(),r.value="list"}})},_=()=>{o.value=void 0};return P(()=>{N()}),A(()=>o.value,t=>{t||(r.value="list")}),(t,v)=>(l(),q("div",W,[z("div",X,[a(D,{modelValue:r.value,"onUpdate:modelValue":v[0]||(v[0]=n=>r.value=n),animated:""},{default:e(()=>[a(g,{name:"list"},{default:e(()=>[s(m)?(l(),i(U,{key:0,ordens:s(m).data},{"custom-actions":e(({props:n})=>[a(y,{color:"primary",icon:"fas fa-file-signature",round:"",flat:"",size:"sm",loading:s(Q)&&d.value===Number(n.key),onClick:T=>B(Number(n.key))},{default:e(()=>[a(k,null,{default:e(()=>[b("Editar resultados.")]),_:1})]),_:2},1032,["loading","onClick"]),n.row.estado===0?(l(),i(y,{key:0,color:"info",icon:"fas fa-check-double",round:"",flat:"",size:"sm",loading:s(L)&&d.value===Number(n.key),onClick:T=>S(Number(n.key))},{default:e(()=>[a(k,null,{default:e(()=>[b("Confirmar registro.")]),_:1})]),_:2},1032,["loading","onClick"])):u("",!0)]),_:1},8,["ordens"])):u("",!0)]),_:1}),a(g,{name:"edit-examens"},{default:e(()=>[s(o)?(l(),i(O,{key:0,icon:"fas fa-file-signature",label:"Datos de la orden."},{default:e(()=>[a(C,{class:"my-card"},{default:e(()=>[a(p,null,{default:e(()=>[a(j,{orden:s(o)},null,8,["orden"])]),_:1})]),_:1})]),_:1})):u("",!0),s(o)?(l(),i(O,{key:1,icon:"fas fa-vials",label:"Registrar resultados.",caption:"Editar / Crear","default-opened":""},{default:e(()=>[a(C,{class:"my-card"},{default:e(()=>[a(p,null,{default:e(()=>[a(G,{orden:s(o),onCancel:_,onSubmit:_},null,8,["orden"])]),_:1})]),_:1})]),_:1})):u("",!0)]),_:1})]),_:1},8,["modelValue"])])]))}});export{ae as default};

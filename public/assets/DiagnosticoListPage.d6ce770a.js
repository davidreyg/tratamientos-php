import{U as D,aQ as y,aG as B,aH as C,X as _,o as f,d as p,w as u,v as b,a6 as w,a4 as m,Q as x,a7 as h,e as O,aF as g,aE as N,aR as A,r as L,a1 as d,at as Q,af as k}from"./index.ddaffeba.js";import{_ as E}from"./BaseTable.fcb0392f.js";function F(){return D(a=>y.delete(a))}function P(a){const t=async()=>(await y.fetchAll(a.value)).data(),{data:o,isLoading:s,isSuccess:r,isError:c,isFetching:l,refetch:e}=B([C.DIAGNOSTICO_ALL,a==null?void 0:a.value],t);return{data:o,isLoading:s,isSuccess:r,isError:c,isFetching:l,refetch:e}}const S=_({__name:"DiagnosticosDataTable",props:{loading:{type:Boolean,required:!1,default:!1},data:{type:Array,required:!0},serverPagination:{type:Object,default:void 0}},emits:["destroyOne","request"],setup(a,{emit:t}){const o=t,{formatDate:s}=A(),r=[{name:"fecha",align:"left",label:"Fecha",field:"created_at",format:e=>s(e)},{name:"paciente",align:"center",label:"Paciente",field:e=>e.paciente.data.nombres+" "+e.paciente.data.apellido_paterno+" "+e.paciente.data.apellido_materno},{name:"dni",align:"center",label:"N\xB0 Documento",field:e=>e.paciente.data.numero_documento},{name:"Descripcion",align:"center",label:"Descripcion",field:"observaciones"},{name:"actions",align:"right",label:"Acciones",field:"actions"}],{mutateAsync:c}=F(),l=e=>{g.fire({title:"\xBFEst\xE1 seguro de eliminar este registro?",text:"No podra deshacer los cambios!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Si",cancelButtonText:"No",showLoaderOnConfirm:!0,preConfirm:async()=>{await c(Number(e),{onSuccess:async()=>{o("destroyOne",e)},onError:()=>{g.hideLoading()}})},allowOutsideClick:()=>!g.isLoading()})};return(e,n)=>(f(),p(E,{columns:r,data:a.data,loading:a.loading,"row-key":"id","show-grid-toggle":!1,"server-pagination":a.serverPagination,onRequest:n[0]||(n[0]=i=>e.$emit("request",i))},{actions:u(({key:i})=>[b((f(),p(w,{clickable:"",onClick:v=>l(i)},{default:u(()=>[m(h,{avatar:""},{default:u(()=>[m(x,{name:"fas fa-trash-can",color:"negative"})]),_:1}),m(h,null,{default:u(()=>[O("Eliminar")]),_:1})]),_:2},1032,["onClick"])),[[N]])]),_:1},8,["data","loading","server-pagination"]))}}),R=_({__name:"DiagnosticoListPage",setup(a){const t=L({page:1}),{data:o,isFetching:s,isSuccess:r,refetch:c}=P(t),l=()=>{k.success("Registro eliminado correctamente."),c.value()},e=n=>{t.value.page=n.pagination.page,t.value.limit=n.pagination.rowsPerPage,t.value.search=n.filter,t.value.orderBy=n.pagination.sortBy,t.value.sortedBy=n.pagination.descending?"desc":"asc"};return(n,i)=>d(r)&&d(o)?(f(),p(S,{key:0,data:d(o).data,loading:d(s),"server-pagination":d(o).meta.pagination,onEdit:i[0]||(i[0]=v=>n.$router.push({name:"empleados.edit",params:{id:v}})),onDestroyOne:l,onRequest:e},null,8,["data","loading","server-pagination"])):Q("",!0)}});export{R as default};

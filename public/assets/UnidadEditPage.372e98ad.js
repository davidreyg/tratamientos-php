import{aG as U,aH as h,U as S,X as b,Z as k,$ as N,a0 as C,o as m,d as p,w as y,a4 as g,ac as E,a1 as e,a9 as x,ax as F,aj as q,ad as v,at as _,af as w}from"./index.ddaffeba.js";import{_ as B}from"./SkeletonForm.7322d735.js";import{U as $}from"./UnidadApi.ac181ce7.js";function L(a,t){const n=async()=>(await $.fetchOne(a)).data().data,{data:s,isLoading:i,isSuccess:o,isError:c,isFetching:u,refetch:r}=U([h.UNIDAD_ALL,a],n,{enabled:t});return{data:s,isLoading:i,isSuccess:o,isError:c,isFetching:u,refetch:r}}function Q(){return S(({data:a,id:t})=>$.update(a,t))}const A=b({__name:"UnidadEditForm",props:{unidad:{type:Object,required:!0}},emits:["submit","cancel"],setup(a,{emit:t}){const n=a,s=t,i=k().shape({nombre:N().trim().min(1).required().label("Nombre")}),{handleSubmit:o,setErrors:c}=C({validationSchema:i,initialValues:n.unidad}),{isLoading:u,mutate:r}=Q(),f=o(async l=>{r({data:l,id:n.unidad.id},{onSuccess:()=>{s("submit")},onError:d=>{c(d.data.errors)}})});return(l,d)=>(m(),p(x,{loading:e(u),onSubmit:e(f),onCancel:d[0]||(d[0]=j=>l.$emit("cancel"))},{default:y(()=>[g(E,{name:"nombre",label:"Nombre",class:"col-12"})]),_:1},8,["loading","onSubmit"]))}}),V={class:"row"},O=b({__name:"UnidadEditPage",props:{id:{type:Number,required:!0}},setup(a){const t=a,n=F(),{data:s,isSuccess:i,isFetching:o}=L(t.id,!0),c=()=>{w.success("Registro actualizado correctamente"),n.back()};return(u,r)=>(m(),q("div",V,[e(o)?(m(),p(v,{key:0,class:"col-xs-12 col-sm-10 q-pa-lg"},{default:y(()=>[g(B,{class:"col-12",inputs:2})]),_:1})):_("",!0),e(i)&&!e(o)&&e(s)?(m(),p(A,{key:1,class:"col-xs-12 col-sm-10",unidad:e(s),gol:e(s),onSubmit:c,onCancel:r[0]||(r[0]=f=>u.$router.back())},null,8,["unidad","gol"])):_("",!0)]))}});export{O as default};

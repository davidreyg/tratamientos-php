import{aH as $,aI as h,W as k,Y as b,$ as C,a0 as E,a1 as N,o as l,e as p,w as S,a5 as y,ad as F,a2 as s,aa as q,ay as v,ak as w,ae as x,au as _,ag as B}from"./index.e07e8f59.js";import{_ as L}from"./SkeletonForm.69637e03.js";import{S as g}from"./SeccionApi.5f2e53bd.js";function Q(e,a){const o=async()=>(await g.fetchOne(e)).data().data,{data:t,isLoading:r,isSuccess:c,isError:i,isFetching:u,refetch:n}=$([h.SECCION_ALL,e],o,{enabled:a});return{data:t,isLoading:r,isSuccess:c,isError:i,isFetching:u,refetch:n}}function I(){return k(({data:e,id:a})=>g.update(e,a))}const O=b({__name:"SeccionEditForm",props:{seccion:{type:Object,required:!0}},emits:["submit","cancel"],setup(e,{emit:a}){const o=e,t=a,r=C().shape({nombre:E().trim().min(2).required().label("Nombre")}),{handleSubmit:c,setErrors:i}=N({validationSchema:r,initialValues:o.seccion}),{isLoading:u,mutate:n}=I(),f=c(async d=>{n({data:d,id:o.seccion.id},{onSuccess:()=>{t("submit")},onError:m=>{i(m.data.errors)}})});return(d,m)=>(l(),p(q,{loading:s(u),onSubmit:s(f),onCancel:m[0]||(m[0]=A=>d.$emit("cancel"))},{default:S(()=>[y(F,{name:"nombre",label:"Nombre",class:"col-12"})]),_:1},8,["loading","onSubmit"]))}}),V={class:"row"},j=b({__name:"SeccionEditPage",props:{id:{type:Number,required:!0}},setup(e){const a=e,o=v(),{data:t,isSuccess:r,isFetching:c}=Q(a.id,!0),i=()=>{B.success("Registro actualizado correctamente"),o.back()};return(u,n)=>(l(),w("div",V,[s(c)?(l(),p(x,{key:0,class:"col-xs-12 col-sm-10 q-pa-lg"},{default:S(()=>[y(L,{class:"col-12",inputs:1})]),_:1})):_("",!0),s(r)&&!s(c)&&s(t)?(l(),p(O,{key:1,class:"col-xs-12 col-sm-10",seccion:s(t),gol:s(t),onSubmit:i,onCancel:n[0]||(n[0]=f=>u.$router.back())},null,8,["seccion","gol"])):_("",!0)]))}});export{j as default};

import{W as C,aH as $,aI as B,Y as p,o as u,ak as x,x as y,e as f,w as r,a5 as o,Q as h,a8 as m,f as v,a7 as _,aD as O,aE as Q,aF as b,aG as g,r as T,a2 as w,ag as k}from"./index.c8292963.js";import{I as E}from"./ItemApi.c7335a73.js";import{_ as A}from"./BaseTable.aa5f51c7.js";function D(){return C(e=>E.destroy(e))}function L(e){const a=async()=>(await E.fetchAll(e==null?void 0:e.value)).data().data,{data:t,isLoading:i,isSuccess:s,isError:l,isFetching:n,refetch:d}=$([B.ITEM_ALL],a);return{data:t,isLoading:i,isSuccess:s,isError:l,isFetching:n,refetch:d}}const S=p({__name:"ItemTableActions",props:{id:{type:String,required:!0}},emits:["destroy","edit"],setup(e){return(a,t)=>(u(),x(Q,null,[y((u(),f(_,{clickable:"",onClick:t[0]||(t[0]=i=>a.$emit("edit",e.id))},{default:r(()=>[o(m,{avatar:""},{default:r(()=>[o(h,{name:"fas fa-pen-to-square",color:"warning"})]),_:1}),o(m,null,{default:r(()=>[v("Editar")]),_:1})]),_:1})),[[b]]),o(O),y((u(),f(_,{clickable:"",onClick:t[1]||(t[1]=i=>a.$emit("destroy",e.id))},{default:r(()=>[o(m,{avatar:""},{default:r(()=>[o(h,{name:"fas fa-trash-can",color:"negative"})]),_:1}),o(m,null,{default:r(()=>[v("Eliminar")]),_:1})]),_:1})),[[b]])],64))}}),F=p({__name:"ItemTable",props:{loading:{type:Boolean,required:!1,default:!1},data:{type:Array,required:!0},serverPagination:{type:Object,default:void 0}},emits:["destroyOne","edit"],setup(e,{emit:a}){const t=a,i=[{name:"nombre",align:"left",label:"Nombre",field:"nombre",sortable:!0},{name:"tipo",align:"center",label:"Tipo",field:"tipo",sortable:!0},{name:"actions",align:"right",label:"",field:"actions"}],{mutateAsync:s}=D(),l=n=>{g.fire({title:"\xBFEst\xE1 seguro de eliminar este registro?",text:"No podra deshacer los cambios!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Si",cancelButtonText:"No",showLoaderOnConfirm:!0,preConfirm:async()=>{await s(n,{onSuccess:async()=>{t("destroyOne",n)},onError:()=>{g.hideLoading()}})},allowOutsideClick:()=>!g.isLoading()})};return(n,d)=>(u(),f(A,{columns:i,data:e.data,loading:e.loading,"row-key":"id","server-pagination":e.serverPagination,"show-grid-toggle":!1},{actions:r(({key:c})=>[o(S,{id:c,onEdit:I=>n.$emit("edit",c),onDestroy:I=>l(c)},null,8,["id","onEdit","onDestroy"])]),_:1},8,["data","loading","server-pagination"]))}}),V=p({__name:"ItemListPage",setup(e){const a=T({limit:0,searchJoin:"and"}),{data:t,isFetching:i,refetch:s}=L(a),l=()=>{k.success("Registro eliminado correctamente."),s.value()};return(n,d)=>(u(),f(F,{data:w(t)||[],loading:w(i),onEdit:d[0]||(d[0]=c=>n.$router.push({name:"items.edit",params:{id:c}})),onDestroyOne:l},null,8,["data","loading"]))}});export{V as default};

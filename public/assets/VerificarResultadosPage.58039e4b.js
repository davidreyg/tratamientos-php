import{W as S,Y as T,ba as P,r as u,bb as A,H as F,o as r,ak as y,aj as q,a5 as a,w as e,am as k,a2 as s,e as i,ac as b,aY as g,f as p,au as c,ae as C,a6 as V,bc as h,al as z,ag as D}from"./index.4a4b5f86.js";import{_ as M,a as U}from"./RegistrarResultadosForm.4ca500e0.js";import{u as Y,_ as j}from"./OrdenTable.afbb30ca.js";import{O as H}from"./OrdenApi.ec4e43af.js";import{u as O}from"./laboratorio.store.bf529a63.js";import"./BaseCheckBox.d3caa683.js";import"./BaseTable.27f6cbd6.js";function J(){return S(f=>H.verificar(f))}const W={class:"row q-col-gutter-md"},G={class:"col-12"},K={key:2},ne=T({__name:"VerificarResultadosPage",setup(f){const{$reset:w,fetchOrdenById:N}=O(),{ordenSeleccionada:n,isOrdenLoading:Q}=P(O()),x=u({search:"estado:1",searchJoin:"and",limit:0}),d=u(),{data:m,refetch:B}=Y(x),l=u("list"),I=async t=>{d.value=t,await N(t),n.value&&(l.value="edit-examens")},{mutateAsync:L,isLoading:$}=J(),E=async t=>{d.value=t,await L(t,{onSuccess:()=>{D.success("La orden se VERIFICO correctamente."),B.value(),l.value="list"}})},_=()=>{n.value=void 0};return A(()=>{w()}),F(()=>n.value,t=>{t||(l.value="list")}),(t,v)=>(r(),y("div",W,[q("div",G,[a(z,{modelValue:l.value,"onUpdate:modelValue":v[0]||(v[0]=o=>l.value=o),animated:""},{default:e(()=>[a(k,{name:"list"},{default:e(()=>[s(m)?(r(),i(j,{key:0,ordens:s(m).data},{"custom-actions":e(({props:o})=>[o.row.estado!==2?(r(),i(b,{key:0,color:"primary",icon:"fas fa-file-signature",round:"",flat:"",size:"sm",loading:s(Q)&&d.value===Number(o.key),onClick:R=>I(Number(o.key))},{default:e(()=>[a(g,null,{default:e(()=>[p("Editar resultados.")]),_:1})]),_:2},1032,["loading","onClick"])):c("",!0),o.row.estado===1?(r(),i(b,{key:1,color:"positive",icon:"fas fa-thumbs-up",round:"",flat:"",size:"sm",loading:s($)&&d.value===Number(o.key),onClick:R=>E(Number(o.key))},{default:e(()=>[a(g,null,{default:e(()=>[p("Verificar orden.")]),_:1})]),_:2},1032,["loading","onClick"])):(r(),y("div",K))]),_:1},8,["ordens"])):c("",!0)]),_:1}),a(k,{name:"edit-examens"},{default:e(()=>[s(n)?(r(),i(h,{key:0,icon:"fas fa-file-signature",label:"Datos de la orden."},{default:e(()=>[a(C,{class:"my-card"},{default:e(()=>[a(V,null,{default:e(()=>[a(M,{orden:s(n)},null,8,["orden"])]),_:1})]),_:1})]),_:1})):c("",!0),s(n)?(r(),i(h,{key:1,icon:"fas fa-vials",label:"Registrar resultados.",caption:"Editar / Crear","default-opened":""},{default:e(()=>[a(C,{class:"my-card"},{default:e(()=>[a(V,null,{default:e(()=>[a(U,{orden:s(n),"with-observaciones":"",onCancel:_,onSubmit:_},null,8,["orden"])]),_:1})]),_:1})]),_:1})):c("",!0)]),_:1})]),_:1},8,["modelValue"])])]))}});export{ne as default};

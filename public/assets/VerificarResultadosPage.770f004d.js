import{W as S,Y as T,b0 as P,r as c,b1 as A,H as F,o as r,ak as y,aj as q,a5 as a,w as e,am as k,a2 as o,e as i,ac as b,aX as g,f as C,au as u,ae as V,a6 as h,b2 as p,al as z,ag as D}from"./index.149cbc01.js";import{u as M,_ as U,a as j,b as H}from"./OrdenTable.74786c36.js";import{O as J}from"./OrdenApi.ecc94288.js";import{u as O}from"./laboratorio.store.fd27a4aa.js";import"./BaseTable.775c5119.js";function W(){return S(f=>J.verificar(f))}const X={class:"row q-col-gutter-md"},Y={class:"col-12"},G={key:2},se=T({__name:"VerificarResultadosPage",setup(f){const{$reset:w,fetchOrdenById:N}=O(),{ordenSeleccionada:n,isOrdenLoading:Q}=P(O()),x=c({search:"estado:1",searchJoin:"and",limit:0}),d=c(),{data:m,refetch:B}=M(x),l=c("list"),I=async t=>{d.value=t,await N(t),n.value&&(l.value="edit-examens")},{mutateAsync:L,isLoading:$}=W(),E=async t=>{d.value=t,await L(t,{onSuccess:()=>{D.success("La orden se VERIFICO correctamente."),B.value(),l.value="list"}})},_=()=>{n.value=void 0};return A(()=>{w()}),F(()=>n.value,t=>{t||(l.value="list")}),(t,v)=>(r(),y("div",X,[q("div",Y,[a(z,{modelValue:l.value,"onUpdate:modelValue":v[0]||(v[0]=s=>l.value=s),animated:""},{default:e(()=>[a(k,{name:"list"},{default:e(()=>[o(m)?(r(),i(U,{key:0,ordens:o(m).data},{"custom-actions":e(({props:s})=>[s.row.estado!==2?(r(),i(b,{key:0,color:"primary",icon:"fas fa-file-signature",round:"",flat:"",size:"sm",loading:o(Q)&&d.value===Number(s.key),onClick:R=>I(Number(s.key))},{default:e(()=>[a(g,null,{default:e(()=>[C("Editar resultados.")]),_:1})]),_:2},1032,["loading","onClick"])):u("",!0),s.row.estado===1?(r(),i(b,{key:1,color:"positive",icon:"fas fa-thumbs-up",round:"",flat:"",size:"sm",loading:o($)&&d.value===Number(s.key),onClick:R=>E(Number(s.key))},{default:e(()=>[a(g,null,{default:e(()=>[C("Verificar orden.")]),_:1})]),_:2},1032,["loading","onClick"])):(r(),y("div",G))]),_:1},8,["ordens"])):u("",!0)]),_:1}),a(k,{name:"edit-examens"},{default:e(()=>[o(n)?(r(),i(p,{key:0,icon:"fas fa-file-signature",label:"Datos de la orden."},{default:e(()=>[a(V,{class:"my-card"},{default:e(()=>[a(h,null,{default:e(()=>[a(j,{orden:o(n)},null,8,["orden"])]),_:1})]),_:1})]),_:1})):u("",!0),o(n)?(r(),i(p,{key:1,icon:"fas fa-vials",label:"Registrar resultados.",caption:"Editar / Crear","default-opened":""},{default:e(()=>[a(V,{class:"my-card"},{default:e(()=>[a(h,null,{default:e(()=>[a(H,{orden:o(n),"with-observaciones":"",onCancel:_,onSubmit:_},null,8,["orden"])]),_:1})]),_:1})]),_:1})):u("",!0)]),_:1})]),_:1},8,["modelValue"])])]))}});export{se as default};

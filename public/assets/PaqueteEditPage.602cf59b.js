import{aH as x,aI as E,W as P,Y as q,$ as S,a0 as w,a1 as N,r as v,o as m,e as d,w as b,a5 as _,ad as F,aj as h,aD as Q,f as B,a2 as s,au as f,aa as C,ay as T,ak as V,ae as A,ag as L}from"./index.d3351ac8.js";import{_ as U}from"./SkeletonForm.1e4f42d1.js";import{u as I}from"./examenFetchAllQuery.1cc89bb9.js";import{P as g}from"./PaqueteApi.23e23aa3.js";import{_ as j}from"./ExamenCardList.f57fecd9.js";import"./ExamenApi.49d03ffc.js";import"./BaseCheckBoxGroup.849dba0a.js";class M{static async run(e){try{return(await g.fetchOne(e)).data().data}catch(t){throw t}}}class O{static async run(e,t){try{await g.update(e,t)}catch(r){throw r}}}function R(a,e){const t=async()=>await M.run(a),{data:r,isLoading:n,isSuccess:c,isError:i,isFetching:u,refetch:o}=x([E.PAQUETE_ALL,a],t,{enabled:e});return{data:r,isLoading:n,isSuccess:c,isError:i,isFetching:u,refetch:o}}function z(){return P(({data:a,id:e})=>O.run(a,e))}const D={class:"col-12"},H={class:"col-12 row q-col-gutter-sm"},J=q({__name:"PaqueteEditForm",props:{paquete:{type:Object,required:!0}},emits:["submit","cancel"],setup(a,{emit:e}){const t=a,r=e,n=S().shape({nombre:w().trim().min(2).required().label("Nombre")}),{handleSubmit:c,setErrors:i}=N({validationSchema:n,initialValues:t.paquete}),u=v({limit:0,search:"is_active:1",searchJoin:"and"}),{data:o}=I(u),{isLoading:y,mutate:$}=z(),k=c(async p=>{$({data:p,id:t.paquete.id},{onSuccess:()=>{r("submit")},onError:l=>{i(l.data.errors)}})});return(p,l)=>(m(),d(C,{loading:s(y),onSubmit:s(k),onCancel:l[0]||(l[0]=Y=>p.$emit("cancel"))},{default:b(()=>[_(F,{name:"nombre",label:"Nombre",class:"col-12"}),h("div",D,[_(Q,{spaced:""}),B(" Examenes")]),h("div",H,[s(o)?(m(),d(j,{key:0,examens:s(o)},null,8,["examens"])):f("",!0)])]),_:1},8,["loading","onSubmit"]))}}),W={class:"row"},se=q({__name:"PaqueteEditPage",props:{id:{type:Number,required:!0}},setup(a){const e=a,t=T(),{data:r,isSuccess:n,isFetching:c}=R(e.id,!0),i=()=>{L.success("Registro actualizado correctamente"),t.back()};return(u,o)=>(m(),V("div",W,[s(c)?(m(),d(A,{key:0,class:"col-xs-12 col-sm-10 q-pa-lg"},{default:b(()=>[_(U,{class:"col-12",inputs:2})]),_:1})):f("",!0),s(n)&&!s(c)&&s(r)?(m(),d(J,{key:1,class:"col-xs-12 col-sm-10",paquete:s(r),gol:s(r),onSubmit:i,onCancel:o[0]||(o[0]=y=>u.$router.back())},null,8,["paquete","gol"])):f("",!0)]))}});export{se as default};

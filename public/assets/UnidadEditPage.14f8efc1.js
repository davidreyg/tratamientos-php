import{aH as h,aI as S,W as U,Y as b,$ as k,a0 as N,a1 as C,o as m,e as p,w as y,a5 as g,ad as E,a2 as e,aa as F,ay as q,ak as v,ae as w,au as _,ag as x}from"./index.da942fdc.js";import{_ as B}from"./SkeletonForm.c7f83311.js";import{U as $}from"./UnidadApi.2c374321.js";function L(a,t){const n=async()=>(await $.fetchOne(a)).data().data,{data:s,isLoading:i,isSuccess:o,isError:c,isFetching:u,refetch:r}=h([S.UNIDAD_ALL,a],n,{enabled:t});return{data:s,isLoading:i,isSuccess:o,isError:c,isFetching:u,refetch:r}}function Q(){return U(({data:a,id:t})=>$.update(a,t))}const A=b({__name:"UnidadEditForm",props:{unidad:{type:Object,required:!0}},emits:["submit","cancel"],setup(a,{emit:t}){const n=a,s=t,i=k().shape({nombre:N().trim().min(2).required().label("Nombre")}),{handleSubmit:o,setErrors:c}=C({validationSchema:i,initialValues:n.unidad}),{isLoading:u,mutate:r}=Q(),f=o(async l=>{r({data:l,id:n.unidad.id},{onSuccess:()=>{s("submit")},onError:d=>{c(d.data.errors)}})});return(l,d)=>(m(),p(F,{loading:e(u),onSubmit:e(f),onCancel:d[0]||(d[0]=V=>l.$emit("cancel"))},{default:y(()=>[g(E,{name:"nombre",label:"Nombre",class:"col-12"})]),_:1},8,["loading","onSubmit"]))}}),I={class:"row"},R=b({__name:"UnidadEditPage",props:{id:{type:Number,required:!0}},setup(a){const t=a,n=q(),{data:s,isSuccess:i,isFetching:o}=L(t.id,!0),c=()=>{x.success("Registro actualizado correctamente"),n.back()};return(u,r)=>(m(),v("div",I,[e(o)?(m(),p(w,{key:0,class:"col-xs-12 col-sm-10 q-pa-lg"},{default:y(()=>[g(B,{class:"col-12",inputs:2})]),_:1})):_("",!0),e(i)&&!e(o)&&e(s)?(m(),p(A,{key:1,class:"col-xs-12 col-sm-10",unidad:e(s),gol:e(s),onSubmit:c,onCancel:r[0]||(r[0]=f=>u.$router.back())},null,8,["unidad","gol"])):_("",!0)]))}});export{R as default};

import{W as U,Y as b,$ as k,a0 as o,b1 as y,a1 as N,r as E,k as u,ag as F,o as p,ak as B,a5 as a,w as R,ad as l,aX as V,aj as h,aD as Q,f as A,a2 as d,aa as L,e as M}from"./index.4a4b5f86.js";import{u as j}from"./establecimientoFetchAllQuery.5ff4a9f4.js";import{u as D}from"./roleListQuery.b276f3c8.js";import{U as P}from"./UserApi.aa304f8f.js";import{_ as T}from"./BaseCheckBoxGroup.440122b5.js";import"./RoleApi.156e1e45.js";function W(){return U(n=>P.create(n))}const X={class:"row"},Y={class:"col-12"},z=b({__name:"UserCreateForm",emits:["submit","cancel"],setup(n,{emit:r}){const s=r,i=k().shape({name:o().trim().min(2).required().label("Usuario"),nombre_completo:o().trim().min(2).required().label("Nombre Completo"),cargo:o().trim().min(2).required().label("Cargo"),password:o().trim().min(2).required().label("Contrase\xF1a"),establecimiento_id:o().required().label("Establecimiento"),role_ids:y().of(o().required()).required().label("Roles")}),{handleSubmit:_,setErrors:f,resetForm:$}=N({validationSchema:i,initialValues:{password:"password",role_ids:[]}}),v=E({limit:0}),{data:m}=j(v),C=u(()=>m.value?m.value.map(e=>({label:e.nombre,value:e.id})):[]),{roles:c}=D(),g=u(()=>c.value?c.value.map(e=>({label:e.display_name,value:Number(e.id)})):[]),{isLoading:q,mutate:x,reset:w}=W(),S=_(async e=>{x(e,{onSuccess:()=>{F.success(),s("submit")},onError:t=>{$(),w.value(),f(t.data.errors)}})},e=>{console.log(e)});return(e,t)=>(p(),B("div",X,[a(L,{class:"col-sm-8 col-xs-12 col-md-6",loading:d(q),onSubmit:d(S),onCancel:t[0]||(t[0]=G=>e.$emit("cancel"))},{default:R(()=>[a(l,{name:"nombre_completo",label:"Nombre Completo",class:"col-12"}),a(l,{name:"name",label:"Usuario",class:"col-xs-12 col-sm-6"}),a(l,{name:"password",label:"Contrase\xF1a",class:"col-xs-12 col-sm-6",type:"password"}),a(V,{options:C.value,name:"establecimiento_id",class:"col-xs-12 col-sm-6",label:"Establecimiento",loading:!1,required:""},null,8,["options"]),a(l,{name:"cargo",label:"Cargo",class:"col-xs-12 col-sm-6"}),h("div",Y,[a(Q,{spaced:""}),A(" Roles: ")]),a(T,{name:"role_ids",label:"Roles",options:g.value},null,8,["options"])]),_:1},8,["loading","onSubmit"])]))}}),ee=b({__name:"UserCreatePage",setup(n){return(r,s)=>(p(),M(z,{onSubmit:s[0]||(s[0]=i=>r.$router.back()),onCancel:s[1]||(s[1]=i=>r.$router.back())}))}});export{ee as default};

import{W as h,Y as p,o as i,ak as B,x as y,e as d,w as o,a5 as a,Q as v,a8 as l,f as _,a7 as b,aD as E,aE as x,aF as w,aG as f,a2 as C,ag as O}from"./index.747a1a42.js";import{R}from"./RespuestaApi.4798ebd4.js";import{_ as k}from"./BaseTable.59993baf.js";import{u as D}from"./respuestaFetchAllQuery.39f9c11e.js";function N(){return h(e=>R.destroy(e))}const Q=p({__name:"RespuestaTableActions",props:{id:{type:String,required:!0}},emits:["destroy","edit"],setup(e){return(s,t)=>(i(),B(x,null,[y((i(),d(b,{clickable:"",onClick:t[0]||(t[0]=r=>s.$emit("edit",e.id))},{default:o(()=>[a(l,{avatar:""},{default:o(()=>[a(v,{name:"fas fa-pen-to-square",color:"warning"})]),_:1}),a(l,null,{default:o(()=>[_("Editar")]),_:1})]),_:1})),[[w]]),a(E),y((i(),d(b,{clickable:"",onClick:t[1]||(t[1]=r=>s.$emit("destroy",e.id))},{default:o(()=>[a(l,{avatar:""},{default:o(()=>[a(v,{name:"fas fa-trash-can",color:"negative"})]),_:1}),a(l,null,{default:o(()=>[_("Eliminar")]),_:1})]),_:1})),[[w]])],64))}}),S=p({__name:"RespuestaTable",props:{loading:{type:Boolean,required:!1,default:!1},data:{type:Array,required:!0},serverPagination:{type:Object,default:void 0}},emits:["destroyOne","edit"],setup(e,{emit:s}){const t=s,r=[{name:"nombre",align:"left",label:"Nombre",field:"nombre",sortable:!0},{name:"actions",align:"right",label:"",field:"actions"}],{mutateAsync:u}=N(),c=n=>{f.fire({title:"\xBFEst\xE1 seguro de eliminar este registro?",text:"No podra deshacer los cambios!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Si",cancelButtonText:"No",showLoaderOnConfirm:!0,preConfirm:async()=>{await u(n,{onSuccess:async()=>{t("destroyOne",n)},onError:()=>{f.hideLoading()}})},allowOutsideClick:()=>!f.isLoading()})};return(n,g)=>(i(),d(k,{columns:r,data:e.data,loading:e.loading,"row-key":"id","server-pagination":e.serverPagination,"show-grid-toggle":!1},{actions:o(({key:m})=>[a(Q,{id:m,onEdit:$=>n.$emit("edit",m),onDestroy:$=>c(m)},null,8,["id","onEdit","onDestroy"])]),_:1},8,["data","loading","server-pagination"]))}}),L=p({__name:"RespuestaListPage",setup(e){const{data:s,isFetching:t,refetch:r}=D(),u=()=>{O.success("Registro eliminado correctamente."),r.value()};return(c,n)=>(i(),d(S,{data:C(s)||[],loading:C(t),onEdit:n[0]||(n[0]=g=>c.$router.push({name:"respuestas.edit",params:{id:g}})),onDestroyOne:u},null,8,["data","loading"]))}});export{L as default};

import{aH as h,aI as S,W as k,Y as _,$ as E,a0 as N,a1 as v,o as l,e as p,w as b,a5 as y,ad as x,a2 as e,aa as F,ay as q,ak as w,ae as A,au as f,ag as B}from"./index.d3351ac8.js";import{_ as L}from"./SkeletonForm.1e4f42d1.js";import{C}from"./CategoriaApi.919c631f.js";function Q(a,t){const o=async()=>(await C.fetchOne(a)).data().data,{data:s,isLoading:n,isSuccess:r,isError:i,isFetching:u,refetch:c}=h([S.CATEGORIA_ALL,a],o,{enabled:t});return{data:s,isLoading:n,isSuccess:r,isError:i,isFetching:u,refetch:c}}function I(){return k(({data:a,id:t})=>C.update(a,t))}const O=_({__name:"CategoriaEditForm",props:{categoria:{type:Object,required:!0}},emits:["submit","cancel"],setup(a,{emit:t}){const o=a,s=t,n=E().shape({nombre:N().trim().min(2).required().label("Nombre")}),{handleSubmit:r,setErrors:i}=v({validationSchema:n,initialValues:o.categoria}),{isLoading:u,mutate:c,reset:g}=I(),$=r(async d=>{c({data:d,id:o.categoria.id},{onSuccess:()=>{s("submit")},onError:m=>{g.value(),i(m.data.errors)}})});return(d,m)=>(l(),p(F,{loading:e(u),class:"col-xs-12 col-sm-6",onSubmit:e($),onCancel:m[0]||(m[0]=V=>d.$emit("cancel"))},{default:b(()=>[y(x,{name:"nombre",label:"Nombre",class:"col-12"})]),_:1},8,["loading","onSubmit"]))}}),R={class:"row"},j=_({__name:"CategoriaEditPage",props:{id:{type:Number,required:!0}},setup(a){const t=a,o=q(),{data:s,isSuccess:n,isFetching:r}=Q(t.id,!0),i=()=>{B.success("Registro actualizado correctamente"),o.back()};return(u,c)=>(l(),w("div",R,[e(r)?(l(),p(A,{key:0,class:"col-xs-12 col-sm-6 q-pa-lg"},{default:b(()=>[y(L,{class:"col-12",inputs:1})]),_:1})):f("",!0),e(n)&&!e(r)&&e(s)?(l(),p(O,{key:1,class:"col-xs-12 col-sm-6",categoria:e(s),gol:e(s),onSubmit:i,onCancel:c[0]||(c[0]=g=>u.$router.back())},null,8,["categoria","gol"])):f("",!0)]))}});export{j as default};

import{W as C,Y as p,o as l,ak as h,x as y,e as c,w as o,a5 as n,Q as b,a8 as d,f as E,a7 as v,aD as $,aE as B,aF as x,aG as g,r as O,a2 as _,ag as k}from"./index.822d49dc.js";import{E as D}from"./ExamenApi.ab8fee7c.js";import{_ as q}from"./BaseTable.b0153d26.js";import{u as N}from"./examenFetchAllQuery.3ea7dbae.js";function Q(){return C(e=>D.destroy(e))}const S=p({__name:"PaqueteTableActions",props:{id:{type:String,required:!0}},emits:["destroy","edit"],setup(e){return(r,a)=>(l(),h(B,null,[y((l(),c(v,{clickable:"",onClick:a[0]||(a[0]=i=>r.$emit("edit",e.id))},{default:o(()=>[n(d,{avatar:""},{default:o(()=>[n(b,{name:"fas fa-pen-to-square",color:"warning"})]),_:1}),n(d,null,{default:o(()=>[E("Editar")]),_:1})]),_:1})),[[x]]),n($),y((l(),c(v,{clickable:"",onClick:a[1]||(a[1]=i=>r.$emit("destroy",e.id))},{default:o(()=>[n(d,{avatar:""},{default:o(()=>[n(b,{name:"fas fa-trash-can",color:"negative"})]),_:1}),n(d,null,{default:o(()=>[E("Eliminar")]),_:1})]),_:1})),[[x]])],64))}}),T=p({__name:"ExamenTable",props:{loading:{type:Boolean,required:!1,default:!1},data:{type:Array,required:!0},serverPagination:{type:Object,default:void 0}},emits:["destroyOne","edit"],setup(e,{emit:r}){const a=r,i=[{name:"nombre",align:"left",label:"Nombre",field:"nombre",sortable:!0},{name:"categoria",align:"center",label:"Categoria",field:t=>t.categoria.data.nombre,sortable:!0},{name:"tipo",align:"center",label:"Tipo",field:"tipo",sortable:!0},{name:"actions",align:"right",label:"",field:"actions"}],{mutateAsync:u}=Q(),m=t=>{g.fire({title:"\xBFEst\xE1 seguro de eliminar este registro?",text:"No podra deshacer los cambios!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Si",cancelButtonText:"No",showLoaderOnConfirm:!0,preConfirm:async()=>{await u(t,{onSuccess:async()=>{a("destroyOne",t)},onError:()=>{g.hideLoading()}})},allowOutsideClick:()=>!g.isLoading()})};return(t,f)=>(l(),c(q,{columns:i,data:e.data,loading:e.loading,"row-key":"id","server-pagination":e.serverPagination,"show-grid-toggle":!1},{actions:o(({key:s})=>[n(S,{id:s,onEdit:w=>t.$emit("edit",s),onDestroy:w=>m(s)},null,8,["id","onEdit","onDestroy"])]),_:1},8,["data","loading","server-pagination"]))}}),I=p({__name:"ExamenListPage",setup(e){const r=O({limit:0,searchJoin:"and"}),{data:a,isFetching:i,refetch:u}=N(r),m=()=>{k.success("Registro eliminado correctamente."),u.value()};return(t,f)=>(l(),c(T,{data:_(a)||[],loading:_(i),onEdit:f[0]||(f[0]=s=>t.$router.push({name:"examens.edit",params:{id:s}})),onDestroyOne:m},null,8,["data","loading"]))}});export{I as default};

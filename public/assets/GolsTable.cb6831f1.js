import{Q as b,_ as D}from"./BaseTable.01e650dc.js";import{h as E,m as c,D as Q,K as g,q as f,A as a,B as e,a5 as p,am as d,O as _,al as h,b7 as S,H as A,b9 as w,C as l,ak as x,E as C,ap as F,b8 as O,aq as B,aW as G,u as N,bx as m}from"./index.8e1e529b.js";import{u as T}from"./useLuxonFormat.a1fe62c3.js";import{u as I}from"./index.1c9af67c.js";import{G as L}from"./GolApi.f6c0f150.js";class M{static async run(s){try{await L.destroy(s)}catch(n){throw n}}}function P(){return I(o=>M.run(o))}const q=E({__name:"GolsTableActions",props:{id:{type:String,required:!0}},emits:["destroy","edit"],setup(o){return(s,n)=>(c(),Q(A,null,[g((c(),f(h,{clickable:"",onClick:n[0]||(n[0]=r=>s.$emit("edit",o.id))},{default:a(()=>[e(d,{avatar:""},{default:a(()=>[e(p,{name:"fas fa-pen-to-square"})]),_:1}),e(d,null,{default:a(()=>[_("Editar")]),_:1})]),_:1})),[[w]]),e(S),g((c(),f(h,{clickable:"",onClick:n[1]||(n[1]=r=>s.$emit("destroy",o.id))},{default:a(()=>[e(d,{avatar:""},{default:a(()=>[e(p,{name:"fas fa-trash-can"})]),_:1}),e(d,null,{default:a(()=>[_("Eliminar")]),_:1})]),_:1})),[[w]])],64))}}),V={class:"q-pa-xs col-xs-12 col-sm-6 col-md-4 col-lg-3 grid-style-transition"},j={class:"text-h6 text-bold"},H={class:"q-mt-md"},K={class:"col-12 text-left text-subtitle1"},J=E({__name:"GolsTable",props:{loading:{type:Boolean,required:!1,default:!1},data:{type:Array,required:!0},serverPagination:{type:Object,default:void 0}},emits:["destroyOne","edit","request"],setup(o,{emit:s}){const n=s,{formatDate:r}=T(),$=[{name:"name",align:"left",label:"Nombre",field:"name",sortable:!0},{name:"academic_entities:academic_entity_id|academic_entities.name",align:"left",label:"Escuela",sortable:!0,field:i=>i.school.name},{name:"academic_entities:academic_entity_id|academic_entities.parent_id",align:"left",label:"Facultad",sortable:!0,field:i=>i.faculty.abbreviation},{name:"created_at",align:"left",label:"Fecha de Creaci\xF3n",field:"created_at",format:i=>r(i)},{name:"is_active",align:"left",label:"Estado",field:"is_active",sortable:!0},{name:"actions",align:"right",label:"",field:"actions"}],{mutateAsync:k}=P(),v=i=>{m.fire({title:"\xBFEst\xE1 seguro de eliminar este registro?",text:"No podra deshacer los cambios!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Si",cancelButtonText:"No",showLoaderOnConfirm:!0,preConfirm:async()=>{await k(i,{onSuccess:async()=>{n("destroyOne",i)},onError:()=>{m.hideLoading()}})},allowOutsideClick:()=>!m.isLoading()})};return(i,y)=>(c(),f(D,{columns:$,data:o.data,loading:o.loading,"row-key":"id","server-pagination":o.serverPagination,onRequest:y[0]||(y[0]=t=>i.$emit("request",t))},{cell_is_active:a(({props:t})=>[e(b,{color:t.value?"positive":"negative",rounded:"",class:"q-mr-sm",label:t.value?"Activo":"Inactivo"},null,8,["color","label"])]),actions:a(({key:t})=>[e(q,{id:t,onEdit:u=>i.$emit("edit",t),onDestroy:u=>v(t)},null,8,["id","onEdit","onDestroy"])]),item:a(({props:t})=>[l("div",V,[e(B,{class:"shadow-12"},{default:a(()=>[e(x,null,{default:a(()=>[l("div",j,C(t.row.name),1),l("div",H,[e(b,{color:t.row.is_active?"positive":"negative",rounded:"",class:"q-mr-sm",label:t.row.is_active?"Activo":"Inactivo"},null,8,["color","label"])]),e(F,{round:"",flat:"",color:"primary",icon:"fas fa-ellipsis",class:"absolute",style:{top:"0",right:"12px",transform:"translateY(-5%) translateX(30%)"}},{default:a(()=>[e(O,{self:"top start",fit:"","transition-show":"flip-right","transition-hide":"jump-up"},{default:a(()=>[e(B,{class:"my-card",flat:""},{default:a(()=>[e(G,{style:{"min-width":"100px"},dense:""},{default:a(()=>[e(q,{id:t.key,onEdit:u=>i.$emit("edit",t.key),onDestroy:u=>v(t.key)},null,8,["id","onEdit","onDestroy"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024),e(x,{class:""},{default:a(()=>[l("div",K,[_(" Creaci\xF3n: "),l("span",null,C(N(r)(t.row.created_at)),1)])]),_:2},1024)]),_:2},1024)])]),_:1},8,["data","loading","server-pagination"]))}});export{J as _};

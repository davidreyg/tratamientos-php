import{Y as h,k as E,$ as F,a0 as f,a$ as $,aS as v,a1 as N,H as B,o as C,e as S,w as n,aj as d,at as Q,a2 as u,a5 as e,ad as _,aP as V,f as g,aa as A,r as x,am as q,al as I,b0 as L,b1 as k,b2 as G,aR as O,aG as w,b3 as R,ak as j,aU as M,ab as U,ac as z,b4 as H,b5 as Y,b6 as y}from"./index.5981ee4f.js";import{u as J}from"./paqueteFetchAllQuery.4fa931e6.js";import{_ as K}from"./ExamenCardList.1516c8fd.js";import{_ as W}from"./BaseCheckBoxGroup.a44ee113.js";import"./PaqueteApi.88b634d4.js";const X={class:"col-12"},Z={class:"col-12"},ee={class:"col-12"},ae={class:"col-12 row q-col-gutter-sm"},oe=h({__name:"OrdenCreateForm",setup(i){const{data:a}=J(),l=E(()=>a.value?a.value.map(t=>({label:t.nombre,value:Number(t.id)})):[]),o=F().shape({diagnostico:f().trim().min(2).required().label("Diagnostico"),CI10:f().trim().min(2).required().label("CI10"),CPN:f().trim().min(2).required().label("CPN"),EG:f().trim().min(2).required().label("EG"),codigo_atencion:f().trim().min(2).required().label("Codigo de Atencion"),examen_ids:$().of(v().required()).required().label("Examenes"),paquete_ids:$().of(v().required()).required().label("Paquetes")}),{values:r,setFieldValue:s}=N({validationSchema:o,initialValues:{examen_ids:[],paquete_ids:[]}});return B(()=>r.examen_ids,t=>{var b;let m=[];m&&s("paquete_ids",[]),(b=a.value)==null||b.forEach(p=>{p.examen_ids.every(c=>t.includes(c))&&(console.log("los elemenotos seleccionados pertenecen al paquete",p.id,p.nombre),m.push(Number(p.id)),console.log(m))}),s("paquete_ids",m)}),(t,m)=>(C(),S(A,null,{default:n(()=>[d("div",X,[d("pre",null,Q(u(r)),1)]),e(_,{name:"diagnostico",label:"Diagnostico",class:"col-xs-12 col-sm-4",required:""}),e(_,{name:"CI10",label:"CI10",class:"col-xs-12 col-sm-4",required:""}),e(_,{name:"CPN",label:"CPN",class:"col-xs-12 col-sm-4",required:""}),e(_,{name:"EG",label:"EG",class:"col-xs-12 col-sm-4",required:""}),e(_,{name:"codigo_atencion",label:"Codigo de Atenci\xF3n",class:"col-xs-12 col-sm-4",required:""}),e(_,{name:"fecha_registro",label:"Fecha de Registro",class:"col-xs-12 col-sm-4",type:"date",required:""}),d("div",Z,[e(V,{spaced:""}),g(" Paquetes")]),d("div",ee,[e(W,{name:"paquete_ids",label:"Paquetes",options:l.value},null,8,["options"])]),d("div",ae,[e(K)])]),_:1}))}}),se=d("div",{class:"text-h6"},"Mails",-1),te=d("div",{class:"text-h6"},"Movies",-1),ne=h({__name:"DatosOrdenTab",setup(i){const a=x("new");return(l,o)=>(C(),S(I,{modelValue:a.value,"onUpdate:modelValue":o[0]||(o[0]=r=>a.value=r),animated:""},{default:n(()=>[e(q,{name:"mails"},{default:n(()=>[se,g(" Lorem ipsum dolor sit amet consectetur adipisicing elit. ")]),_:1}),e(q,{name:"new"},{default:n(()=>[e(oe)]),_:1}),e(q,{name:"movies"},{default:n(()=>[te,g(" Lorem ipsum dolor sit amet consectetur adipisicing elit. ")]),_:1})]),_:1},8,["modelValue"]))}}),D=L("laboratorio-form",()=>{const i=x(),a=x(!1);function l(){i.value=void 0}function o(s){i.value=s}async function r(s){a.value=!0;try{i.value=void 0,i.value=await k.run(s),a.value=!1}catch(t){throw a.value=!1,t}}return{paciente:i,isPacienteLoading:a,$reset:l,setPaciente:o,fetchPaciente:r}}),ie={class:"row q-col-gutter-md"},le={class:"col-12"},_e=h({__name:"GenerarOrdenPage",setup(i){const{fetchPaciente:a,$reset:l}=D(),{paciente:o,isPacienteLoading:r}=G(D()),{data:s}=O(),t=E(()=>s.value?s.value.map(c=>({label:c.nombre,value:c.id})):[]),m=F().shape({numero_documento:v().typeError("Debe ingresar un n\xFAmero").min(8).required().label("N\xFAmero de Documento"),tipo_documento_id:f().required().label("Tipo de Documento")}),{handleSubmit:b}=N({validationSchema:m}),p=b(async c=>{await a(c.numero_documento),o.value?w.fire({title:"Exito!",text:"Paciente encontrado correctamente!",icon:"success"}):w.fire({title:"Informaci\xF3n!",text:"No se encontro el paciente indicado!",icon:"info"})});return R(()=>{if(window.confirm("Esta seguro de salir? Tiene cambios sin guardar!"))l();else return!1}),(c,P)=>(C(),j("div",ie,[e(H,{class:"col-12 row q-col-gutter-lg items-start justify-center",onSubmit:u(p)},{default:n(()=>[e(M,{options:t.value,name:"tipo_documento_id",class:"col-xs-12 col-sm-4",label:"Tipo de Documento",loading:!1,required:""},null,8,["options"]),e(_,{name:"numero_documento",label:"N\xB0 de Documento",class:"col-xs-12 col-sm-4",required:""}),e(U,{class:"col-auto justify-center"},{default:n(()=>[e(z,{color:"primary",outline:"",size:"lg",icon:"search",label:"Buscar","no-caps":"",type:"submit",loading:u(r)},null,8,["loading"])]),_:1})]),_:1},8,["onSubmit"]),d("div",le,[e(y,{icon:"fas fa-person",label:"Datos del Paciente",caption:"Editar / Crear",class:"bg-purple-2"},{default:n(()=>[e(Y,{class:"bg-purple-1",paciente:u(o),onCancel:u(l),onSubmit:P[0]||(P[0]=T=>u(a)(T))},null,8,["paciente","onCancel"])]),_:1}),e(y,{icon:"fas fa-vials",label:"Datos de la Orden de Lab.",caption:"Editar / Crear"},{default:n(()=>[e(ne,{paciente:u(o),onCancel:u(l)},null,8,["paciente","onCancel"])]),_:1})])]))}});export{_e as default};

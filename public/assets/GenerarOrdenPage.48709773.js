import{Y as C,k as S,$ as D,a0 as f,a$ as $,aS as x,a1 as E,H as B,o as P,e as F,w as i,aj as m,at as Q,a2 as d,a5 as e,ad as p,aP as A,f as g,aa as L,r as h,am as q,al as V,b0 as G,b1 as I,b2 as k,aR as O,aG as w,b3 as R,ak as U,aU as j,ab as M,ac as z,b4 as H,b5 as Y,b6 as y}from"./index.cb0e24bc.js";import{u as J}from"./paqueteFetchAllQuery.10f91f25.js";import{_ as K}from"./ExamenCardList.74d6a67e.js";import{_ as W}from"./BaseCheckBoxGroup.d7742fe7.js";import"./PaqueteApi.22547ae8.js";const X={class:"col-12"},Z={class:"col-12"},ee={class:"col-12"},ae={class:"col-12 row q-col-gutter-sm"},te=C({__name:"OrdenCreateForm",setup(r){const{data:a}=J(),l=S(()=>a.value?a.value.map(o=>({label:o.nombre,value:Number(o.id)})):[]),s=D().shape({diagnostico:f().trim().min(2).required().label("Diagnostico"),CI10:f().trim().min(2).required().label("CI10"),CPN:f().trim().min(2).required().label("CPN"),EG:f().trim().min(2).required().label("EG"),codigo_atencion:f().trim().min(2).required().label("Codigo de Atencion"),examen_ids:$().of(x().required()).required().label("Examenes"),paquete_ids:$().of(x().required()).required().label("Paquetes")}),{values:c,setFieldValue:n}=E({validationSchema:s,initialValues:{examen_ids:[],paquete_ids:[]}});B(()=>c.examen_ids,o=>{var u;if(o){const _=(u=a.value)==null?void 0:u.filter(t=>t.examen_ids.every(v=>o.includes(v)));n("paquete_ids",(_==null?void 0:_.map(t=>Number(t.id)))||[])}});const b=o=>{var u;if(o){const _=(u=a.value)==null?void 0:u.filter(t=>o.includes(Number(t.id))).map(t=>t.examen_ids).flat();n("examen_ids",[...new Set(_)])}};return(o,u)=>(P(),F(L,null,{default:i(()=>[m("div",X,[m("pre",null,Q(d(c)),1)]),e(p,{name:"diagnostico",label:"Diagnostico",class:"col-xs-12 col-sm-4",required:""}),e(p,{name:"CI10",label:"CI10",class:"col-xs-12 col-sm-4",required:""}),e(p,{name:"CPN",label:"CPN",class:"col-xs-12 col-sm-4",required:""}),e(p,{name:"EG",label:"EG",class:"col-xs-12 col-sm-4",required:""}),e(p,{name:"codigo_atencion",label:"Codigo de Atenci\xF3n",class:"col-xs-12 col-sm-4",required:""}),e(p,{name:"fecha_registro",label:"Fecha de Registro",class:"col-xs-12 col-sm-4",type:"date",required:""}),m("div",Z,[e(A,{spaced:""}),g(" Paquetes")]),m("div",ee,[e(W,{name:"paquete_ids",label:"Paquetes",options:l.value,onUpdate:b},null,8,["options"])]),m("div",ae,[e(K)])]),_:1}))}}),oe=m("div",{class:"text-h6"},"Mails",-1),se=m("div",{class:"text-h6"},"Movies",-1),ne=C({__name:"DatosOrdenTab",setup(r){const a=h("new");return(l,s)=>(P(),F(V,{modelValue:a.value,"onUpdate:modelValue":s[0]||(s[0]=c=>a.value=c),animated:""},{default:i(()=>[e(q,{name:"mails"},{default:i(()=>[oe,g(" Lorem ipsum dolor sit amet consectetur adipisicing elit. ")]),_:1}),e(q,{name:"new"},{default:i(()=>[e(te)]),_:1}),e(q,{name:"movies"},{default:i(()=>[se,g(" Lorem ipsum dolor sit amet consectetur adipisicing elit. ")]),_:1})]),_:1},8,["modelValue"]))}}),N=G("laboratorio-form",()=>{const r=h(),a=h(!1);function l(){r.value=void 0}function s(n){r.value=n}async function c(n){a.value=!0;try{r.value=void 0,r.value=await I.run(n),a.value=!1}catch(b){throw a.value=!1,b}}return{paciente:r,isPacienteLoading:a,$reset:l,setPaciente:s,fetchPaciente:c}}),ie={class:"row q-col-gutter-md"},re={class:"col-12"},_e=C({__name:"GenerarOrdenPage",setup(r){const{fetchPaciente:a,$reset:l}=N(),{paciente:s,isPacienteLoading:c}=k(N()),{data:n}=O(),b=S(()=>n.value?n.value.map(t=>({label:t.nombre,value:t.id})):[]),o=D().shape({numero_documento:x().typeError("Debe ingresar un n\xFAmero").min(8).required().label("N\xFAmero de Documento"),tipo_documento_id:f().required().label("Tipo de Documento")}),{handleSubmit:u}=E({validationSchema:o}),_=u(async t=>{await a(t.numero_documento),s.value?w.fire({title:"Exito!",text:"Paciente encontrado correctamente!",icon:"success"}):w.fire({title:"Informaci\xF3n!",text:"No se encontro el paciente indicado!",icon:"info"})});return R(()=>{if(window.confirm("Esta seguro de salir? Tiene cambios sin guardar!"))l();else return!1}),(t,v)=>(P(),U("div",ie,[e(H,{class:"col-12 row q-col-gutter-lg items-start justify-center",onSubmit:d(_)},{default:i(()=>[e(j,{options:b.value,name:"tipo_documento_id",class:"col-xs-12 col-sm-4",label:"Tipo de Documento",loading:!1,required:""},null,8,["options"]),e(p,{name:"numero_documento",label:"N\xB0 de Documento",class:"col-xs-12 col-sm-4",required:""}),e(M,{class:"col-auto justify-center"},{default:i(()=>[e(z,{color:"primary",outline:"",size:"lg",icon:"search",label:"Buscar","no-caps":"",type:"submit",loading:d(c)},null,8,["loading"])]),_:1})]),_:1},8,["onSubmit"]),m("div",re,[e(y,{icon:"fas fa-person",label:"Datos del Paciente",caption:"Editar / Crear",class:"bg-purple-2"},{default:i(()=>[e(Y,{class:"bg-purple-1",paciente:d(s),onCancel:d(l),onSubmit:v[0]||(v[0]=T=>d(a)(T))},null,8,["paciente","onCancel"])]),_:1}),e(y,{icon:"fas fa-vials",label:"Datos de la Orden de Lab.",caption:"Editar / Crear"},{default:i(()=>[e(ne,{paciente:d(s),onCancel:d(l)},null,8,["paciente","onCancel"])]),_:1})])]))}});export{_e as default};

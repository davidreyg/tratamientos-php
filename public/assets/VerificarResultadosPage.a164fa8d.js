import{Y as S,b1 as T,r as f,b2 as $,H as I,o as r,ak as P,aj as q,a5 as a,w as e,am as v,a2 as t,e as c,ac as g,aX as y,f as b,au as u,ae as k,a6 as C,b5 as h,al as z,ag as A}from"./index.d215a0e8.js";import{u as D,a as F,_ as U,b as j,c as G}from"./OrdenTable.d4e6a7ba.js";import{u as p}from"./laboratorio.store.b1e5eaea.js";import"./BaseTable.b5a45280.js";const H={class:"row q-col-gutter-md"},J={class:"col-12"},Z=S({__name:"VerificarResultadosPage",setup(M){const{$reset:N,fetchOrdenById:w}=p(),{ordenSeleccionada:o,isOrdenLoading:O}=T(p()),Q=f({search:"estado:1",searchJoin:"and",limit:0}),i=f(),{data:m,refetch:R}=D(Q),l=f("list"),V=async s=>{i.value=s,await w(s),o.value&&(l.value="edit-examens")},{mutateAsync:x,isLoading:B}=F(),E=async s=>{i.value=s,await x(s,{onSuccess:()=>{A.success("La orden se REGISTRO correctamente."),R.value(),l.value="list"},onError:d=>{console.log(d)}})},_=()=>{o.value=void 0};return $(()=>{N()}),I(()=>o.value,s=>{s||(l.value="list")}),(s,d)=>(r(),P("div",H,[q("div",J,[a(z,{modelValue:l.value,"onUpdate:modelValue":d[0]||(d[0]=n=>l.value=n),animated:""},{default:e(()=>[a(v,{name:"list"},{default:e(()=>[t(m)?(r(),c(U,{key:0,ordens:t(m).data},{"custom-actions":e(({props:n})=>[a(g,{color:"primary",icon:"fas fa-file-signature",round:"",flat:"",size:"sm",loading:t(O)&&i.value===Number(n.key),onClick:L=>V(Number(n.key))},{default:e(()=>[a(y,null,{default:e(()=>[b("Editar resultados.")]),_:1})]),_:2},1032,["loading","onClick"]),n.row.estado===0?(r(),c(g,{key:0,color:"positive",icon:"fas fa-check-double",round:"",flat:"",size:"sm",loading:t(B)&&i.value===Number(n.key),onClick:L=>E(Number(n.key))},{default:e(()=>[a(y,null,{default:e(()=>[b("Confirmar registro.")]),_:1})]),_:2},1032,["loading","onClick"])):u("",!0)]),_:1},8,["ordens"])):u("",!0)]),_:1}),a(v,{name:"edit-examens"},{default:e(()=>[t(o)?(r(),c(h,{key:0,icon:"fas fa-file-signature",label:"Datos de la orden."},{default:e(()=>[a(k,{class:"my-card"},{default:e(()=>[a(C,null,{default:e(()=>[a(j,{orden:t(o)},null,8,["orden"])]),_:1})]),_:1})]),_:1})):u("",!0),t(o)?(r(),c(h,{key:1,icon:"fas fa-vials",label:"Registrar resultados.",caption:"Editar / Crear","default-opened":""},{default:e(()=>[a(k,{class:"my-card"},{default:e(()=>[a(C,null,{default:e(()=>[a(G,{orden:t(o),"with-observaciones":"",onCancel:_,onSubmit:_},null,8,["orden"])]),_:1})]),_:1})]),_:1})):u("",!0)]),_:1})]),_:1},8,["modelValue"])])]))}});export{Z as default};

import{W as S,Y as T,b1 as P,r as f,b2 as A,H as F,o as r,ak as y,aj as q,a5 as a,w as e,am as k,a2 as o,e as i,ac as b,aX as g,f as C,au as u,ae as V,a6 as h,b5 as p,al as z,ag as D}from"./index.cab78154.js";import{u as M,_ as U,a as j,b as H}from"./OrdenTable.d8224a32.js";import{O as J,u as O}from"./laboratorio.store.ac157cd8.js";import"./BaseTable.35738929.js";function W(){return S(m=>J.verificar(m))}const X={class:"row q-col-gutter-md"},Y={class:"col-12"},G={key:2},te=T({__name:"VerificarResultadosPage",setup(m){const{$reset:w,fetchOrdenById:N}=O(),{ordenSeleccionada:n,isOrdenLoading:Q}=P(O()),x=f({search:"estado:1,2",searchJoin:"and",limit:0}),d=f(),{data:_,refetch:B}=M(x),l=f("list"),E=async t=>{d.value=t,await N(t),n.value&&(l.value="edit-examens")},{mutateAsync:I,isLoading:L}=W(),$=async t=>{d.value=t,await I(t,{onSuccess:()=>{D.success("La orden se VERIFICO correctamente."),B.value(),l.value="list"},onError:c=>{console.log(c)}})},v=()=>{n.value=void 0};return A(()=>{w()}),F(()=>n.value,t=>{t||(l.value="list")}),(t,c)=>(r(),y("div",X,[q("div",Y,[a(z,{modelValue:l.value,"onUpdate:modelValue":c[0]||(c[0]=s=>l.value=s),animated:""},{default:e(()=>[a(k,{name:"list"},{default:e(()=>[o(_)?(r(),i(U,{key:0,ordens:o(_).data},{"custom-actions":e(({props:s})=>[s.row.estado!==2?(r(),i(b,{key:0,color:"primary",icon:"fas fa-file-signature",round:"",flat:"",size:"sm",loading:o(Q)&&d.value===Number(s.key),onClick:R=>E(Number(s.key))},{default:e(()=>[a(g,null,{default:e(()=>[C("Editar resultados.")]),_:1})]),_:2},1032,["loading","onClick"])):u("",!0),s.row.estado===1?(r(),i(b,{key:1,color:"positive",icon:"fas fa-thumbs-up",round:"",flat:"",size:"sm",loading:o(L)&&d.value===Number(s.key),onClick:R=>$(Number(s.key))},{default:e(()=>[a(g,null,{default:e(()=>[C("Verificar orden.")]),_:1})]),_:2},1032,["loading","onClick"])):(r(),y("div",G))]),_:1},8,["ordens"])):u("",!0)]),_:1}),a(k,{name:"edit-examens"},{default:e(()=>[o(n)?(r(),i(p,{key:0,icon:"fas fa-file-signature",label:"Datos de la orden."},{default:e(()=>[a(V,{class:"my-card"},{default:e(()=>[a(h,null,{default:e(()=>[a(j,{orden:o(n)},null,8,["orden"])]),_:1})]),_:1})]),_:1})):u("",!0),o(n)?(r(),i(p,{key:1,icon:"fas fa-vials",label:"Registrar resultados.",caption:"Editar / Crear","default-opened":""},{default:e(()=>[a(V,{class:"my-card"},{default:e(()=>[a(h,null,{default:e(()=>[a(H,{orden:o(n),"with-observaciones":"",onCancel:v,onSubmit:v},null,8,["orden"])]),_:1})]),_:1})]),_:1})):u("",!0)]),_:1})]),_:1},8,["modelValue"])])]))}});export{te as default};

import{W as w,Y as b,$ as S,a0 as o,b4 as k,a1 as N,k as u,ag as y,o as p,ak as E,a5 as a,w as F,ad as l,aU as B,aj as R,aP as V,f as h,a2 as d,aa as Q,e as A}from"./index.4de37196.js";import{u as L}from"./establecimientoFetchAllQuery.5a0b8b02.js";import{u as M}from"./roleListQuery.7bb7fbb9.js";import{U as P}from"./UserApi.5f5d0dc4.js";import{_ as j}from"./BaseCheckBoxGroup.0eabbe9b.js";import"./RoleApi.ed30d6ee.js";function T(){return w(n=>P.create(n))}const W={class:"row"},Y={class:"col-12"},z=b({__name:"UserCreateForm",emits:["submit","cancel"],setup(n,{emit:r}){const s=r,i=S().shape({name:o().trim().min(2).required().label("Usuario"),nombre_completo:o().trim().min(2).required().label("Nombre Completo"),cargo:o().trim().min(2).required().label("Cargo"),password:o().trim().min(2).required().label("Contrase\xF1a"),establecimiento_id:o().required().label("Establecimiento"),role_ids:k().of(o().required()).required().label("Roles")}),{handleSubmit:_,setErrors:f,resetForm:$}=N({validationSchema:i,initialValues:{password:"password",role_ids:[]}}),{data:m}=L(),v=u(()=>m.value?m.value.map(e=>({label:e.nombre,value:e.id})):[]),{roles:c}=M(),C=u(()=>c.value?c.value.map(e=>({label:e.display_name,value:Number(e.id)})):[]),{isLoading:g,mutate:x,reset:U}=T(),q=_(async e=>{x(e,{onSuccess:()=>{y.success(),s("submit")},onError:t=>{$(),U.value(),f(t.data.errors)}})},e=>{console.log(e)});return(e,t)=>(p(),E("div",W,[a(Q,{class:"col-sm-8 col-xs-12 col-md-6",loading:d(g),onSubmit:d(q),onCancel:t[0]||(t[0]=D=>e.$emit("cancel"))},{default:F(()=>[a(l,{name:"nombre_completo",label:"Nombre Completo",class:"col-12"}),a(l,{name:"name",label:"Usuario",class:"col-xs-12 col-sm-6"}),a(l,{name:"password",label:"Contrase\xF1a",class:"col-xs-12 col-sm-6",type:"password"}),a(B,{options:v.value,name:"establecimiento_id",class:"col-xs-12 col-sm-6",label:"Establecimiento",loading:!1,required:""},null,8,["options"]),a(l,{name:"cargo",label:"Cargo",class:"col-xs-12 col-sm-6"}),R("div",Y,[a(V,{spaced:""}),h(" Roles: ")]),a(j,{name:"role_ids",label:"Roles",options:C.value},null,8,["options"])]),_:1},8,["loading","onSubmit"])]))}}),X=b({__name:"UserCreatePage",setup(n){return(r,s)=>(p(),A(z,{onSubmit:s[0]||(s[0]=i=>r.$router.back()),onCancel:s[1]||(s[1]=i=>r.$router.back())}))}});export{X as default};

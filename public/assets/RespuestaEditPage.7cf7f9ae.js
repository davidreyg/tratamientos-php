import{aG as $,aH as h,U as R,X as b,Z as E,$ as k,a0 as C,o as l,d as p,w as y,a4 as g,ac as N,a1 as s,a9 as x,ax as F,aj as q,ad as v,at as _,af as w}from"./index.ddaffeba.js";import{_ as B}from"./SkeletonForm.7322d735.js";import{R as S}from"./RespuestaApi.7dfd3c6f.js";function L(e,t){const o=async()=>(await S.fetchOne(e)).data().data,{data:a,isLoading:c,isSuccess:r,isError:u,isFetching:i,refetch:n}=$([h.RESPUESTA_ALL,e],o,{enabled:t});return{data:a,isLoading:c,isSuccess:r,isError:u,isFetching:i,refetch:n}}function Q(){return R(({data:e,id:t})=>S.update(e,t))}const U=b({__name:"RespuestaEditForm",props:{respuesta:{type:Object,required:!0}},emits:["submit","cancel"],setup(e,{emit:t}){const o=e,a=t,c=E().shape({nombre:k().trim().min(2).required().label("Nombre")}),{handleSubmit:r,setErrors:u}=C({validationSchema:c,initialValues:o.respuesta}),{isLoading:i,mutate:n}=Q(),f=r(async d=>{n({data:d,id:o.respuesta.id},{onSuccess:()=>{a("submit")},onError:m=>{u(m.data.errors)}})});return(d,m)=>(l(),p(x,{loading:s(i),onSubmit:s(f),onCancel:m[0]||(m[0]=V=>d.$emit("cancel"))},{default:y(()=>[g(N,{name:"nombre",label:"Nombre",class:"col-12"})]),_:1},8,["loading","onSubmit"]))}}),A={class:"row"},P=b({__name:"RespuestaEditPage",props:{id:{type:Number,required:!0}},setup(e){const t=e,o=F(),{data:a,isSuccess:c,isFetching:r}=L(t.id,!0),u=()=>{w.success("Registro actualizado correctamente"),o.back()};return(i,n)=>(l(),q("div",A,[s(r)?(l(),p(v,{key:0,class:"col-xs-12 col-sm-10 q-pa-lg"},{default:y(()=>[g(B,{class:"col-12",inputs:1})]),_:1})):_("",!0),s(c)&&!s(r)&&s(a)?(l(),p(U,{key:1,class:"col-xs-12 col-sm-10",respuesta:s(a),gol:s(a),onSubmit:u,onCancel:n[0]||(n[0]=f=>i.$router.back())},null,8,["respuesta","gol"])):_("",!0)]))}});export{P as default};
